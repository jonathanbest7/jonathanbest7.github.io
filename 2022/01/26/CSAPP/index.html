<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/bitbug_favicon.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/bitbug_favicon.ico">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"jonathanbest7.github.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="CSAPP-1:计算机系统漫游1.1位与上下文源程序是由0和1的位组成的序列，8位为1字节，对于程序是如何运行的：我们写的c语言每一个字符都用ascii来表示，被叫做文本文件。通过这个实例我们知道，在计算机中所有信息都是由一串比特所构成。 1.2高级到低级 我们的源代码由上图所示进行编译，预处理阶段是进行引用头文件，编译阶段是编译成汇编语言，文件后缀是.s，汇编阶段是编译成机器语言，这是最底层的语">
<meta property="og:type" content="article">
<meta property="og:title" content="CSAPP-1">
<meta property="og:url" content="https://jonathanbest7.github.io/2022/01/26/CSAPP/index.html">
<meta property="og:site_name" content="bj777的blog">
<meta property="og:description" content="CSAPP-1:计算机系统漫游1.1位与上下文源程序是由0和1的位组成的序列，8位为1字节，对于程序是如何运行的：我们写的c语言每一个字符都用ascii来表示，被叫做文本文件。通过这个实例我们知道，在计算机中所有信息都是由一串比特所构成。 1.2高级到低级 我们的源代码由上图所示进行编译，预处理阶段是进行引用头文件，编译阶段是编译成汇编语言，文件后缀是.s，汇编阶段是编译成机器语言，这是最底层的语">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-1/image-20220126182535717.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-1/image-20220126183312872.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-1/image-20220126224743971.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-1/image-20220126225811627.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-1/image-20220126225849940.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-1/image-20220126230455324.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-1/image-20220126231637917.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-1/image-20220126231645698.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-1/image-20220126232302742.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-1/image-20220126232446158.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-1/image-20220126233152306.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-1/image-20220126233221807.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/26/CSAPP/image-20220126233440876.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-2/image-20220205103509225.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-2/image-20220205103625702.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-2/image-20220205104800188.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-2/image-20220205110346437.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-2/image-20220205110708464.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-2/image-20220205112220948.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-2/image-20220207140008362.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-2/image-20220207140353073.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-2/image-20220207140403917.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-2/image-20220207141727279.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-2/image-20220207144402298.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-2/image-20220207151533153.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-2/image-20220207161439255.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-2/image-20220207161453816.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-2/image-20220207162119452.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-2/image-20220207162845253.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-2/image-20220207163635330.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-2/image-20220207164514250.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-2/image-20220207164803252.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-2/image-20220208220140308.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-2/image-20220208220651497.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-2/image-20220208221508778.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-2/image-20220208222422119.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-2/image-20220209102633405.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-2/image-20220209102650709.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-2/image-20220209102721969.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-2/image-20220209102820327.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-3/image-20220303220910142.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-3/image-20220303221116240.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-3/image-20220303224704891.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-3/image-20220304123732270.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-3/image-20220304123936154.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-3/image-20220304125453591.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-3/image-20220304125624929.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-3/image-20220304130326450.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-3/image-20220304132847111.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-3/image-20220309135243852.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-3/image-20220309135548164.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-3/image-20220309140304334.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-3/image-20220309140646395.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-3/image-20220309140823490.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-3/image-20220309141045501.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-3/image-20220309141213694.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-3/image-20220309141343757.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-3/image-20220309141348611.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-3/image-20220309142149530.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-3/image-20220309142155379.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-3/image-20220309142541692.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-3/image-20220309142756951.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-3/image-20220309151916807.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-3/image-20220309152719554.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-3/image-20220309152817073.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-3/image-20220309152806881.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-3/image-20220309153035920.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-3/image-20220309153400037.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-3/image-20220309153435851.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-3/image-20220309153441198.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-3/image-20220309153801221.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-3/image-20220309161412343.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-3/image-20220309163604767.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-3/image-20220309164838805.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-3/image-20220309164845071.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-3/image-20220309164852994.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-3/image-20220309165031493.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-3/image-20220309165157591.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-3/image-20220309165457631.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-3/image-20220309165638590.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-3/image-20220309165653801.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-3/image-20220309165753954.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-3/image-20220309170014341.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-3/image-20220309170420708.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-3/image-20220309170500224.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-3/image-20220309170518471.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-LAB/image-20220303172619689.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-LAB/image-20220303172745254.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-LAB/image-20220303172937753.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-LAB/image-20220303181512313.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-LAB/image-20220303181600058.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-LAB/image-20220303185344874.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-LAB/image-20220303185414142.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-LAB/image-20220303194719642.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-LAB/image-20220303194725447.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-LAB/image-20220303205629062.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-LAB/image-20220303212529967.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/csapp-s2e/image-20220317175712426.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/csapp-s2e/image-20220317175850287.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/csapp-s2e/image-20220317175859399.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/csapp-s2e/image-20220317185459019.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/csapp-s2e/image-20220317191156258.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/csapp-s2e/image-20220330144554826.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/csapp-s2e/image-20220330150855839.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/csapp-s2e/image-20220330151839295.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/csapp-s2e/image-20220330152051016.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/csapp-s2e/image-20220330195229301.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/csapp-s2e/image-20220330195407058.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/csapp-s2e/image-20220330195411404.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/csapp-s2e/image-20220330161638664.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/csapp-s2e/image-20220330161932306.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/csapp-s2e/image-20220330164410397.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/csapp-s2e/image-20220330182320641.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/csapp-s2e/image-20220330182504346.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/csapp-s2e/image-20220330184616086.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/csapp-s2e/image-20220330184631787.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/csapp-s2e/image-20220330190117921.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/csapp-s2e/image-20220330191054571.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/csapp-s2e/image-20220330192218540.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/csapp-s2e/image-20220330192224264.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/csapp-s2e/image-20220407161312042.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/csapp-s2e/image-20220407161502198.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/csapp-s2e/image-20220407161528243.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/csapp-s2e/image-20220407164830759.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/csapp-s2e/image-20220407165613175.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/csapp-s2e/image-20220407171051825.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/csapp-s2e/image-20220407190742632.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/csapp-s2e/image-20220407190946484.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/csapp-s2e/image-20220407194955709.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/csapp-s2e/image-20220409213205635.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/csapp-s2e/image-20220409214918203.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/csapp-s2e/image-20220409215023731.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/csapp-s2e/image-20220409220108931.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/csapp-s2e/image-20220410205254755.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/csapp-s2e/image-20220410205657029.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/csapp-s2e/image-20220410205814914.png">
<meta property="og:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/csapp-s2e/image-20220410210008538.png">
<meta property="og:image" content="https://jonathanbest7.github.io/Users/86159/AppData/Roaming/Typora/typora-user-images/image-20220412135816648.png">
<meta property="article:published_time" content="2022-01-26T10:19:59.000Z">
<meta property="article:modified_time" content="2022-07-17T16:36:28.164Z">
<meta property="article:author" content="bj777">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://jonathanbest7.github.io/2022/01/blog/source/_posts/CSAPP-1/image-20220126182535717.png">

<link rel="canonical" href="https://jonathanbest7.github.io/2022/01/26/CSAPP/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>CSAPP-1 | bj777的blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">bj777的blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">记录学习每一瞬间</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">1</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">0</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">41</span></a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://jonathanbest7.github.io/2022/01/26/CSAPP/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/bitbug_favicon.ico">
      <meta itemprop="name" content="bj777">
      <meta itemprop="description" content="一位逆向菜狗">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="bj777的blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          CSAPP-1
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-01-26 18:19:59" itemprop="dateCreated datePublished" datetime="2022-01-26T18:19:59+08:00">2022-01-26</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-07-18 00:36:28" itemprop="dateModified" datetime="2022-07-18T00:36:28+08:00">2022-07-18</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="CSAPP-1-计算机系统漫游"><a href="#CSAPP-1-计算机系统漫游" class="headerlink" title="CSAPP-1:计算机系统漫游"></a>CSAPP-1:计算机系统漫游</h1><h2 id="1-1位与上下文"><a href="#1-1位与上下文" class="headerlink" title="1.1位与上下文"></a>1.1位与上下文</h2><p>源程序是由0和1的位组成的序列，8位为1字节，对于程序是如何运行的：我们写的c语言每一个字符都用ascii来表示，被叫做文本文件。通过这个实例我们知道，在计算机中所有信息都是由一串比特所构成。</p>
<h2 id="1-2高级到低级"><a href="#1-2高级到低级" class="headerlink" title="1.2高级到低级"></a>1.2高级到低级</h2><p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-1/image-20220126182535717.png"></p>
<p>我们的源代码由上图所示进行编译，预处理阶段是进行引用头文件，编译阶段是编译成汇编语言，文件后缀是.s，汇编阶段是编译成机器语言，这是最底层的语言，链接阶段，是将我们引用头文件中的函数进行调用。</p>
<p>在linux上我们在terminal中输入gcc -o file.c进行编译</p>
<h2 id="1-3处理器读写并解释储存在内存中的指令"><a href="#1-3处理器读写并解释储存在内存中的指令" class="headerlink" title="1.3处理器读写并解释储存在内存中的指令"></a>1.3处理器读写并解释储存在内存中的指令</h2><p>在UNIX系统上运行可执行文件，我们需要shell：shell是命令届时请，它输出提示符，我们输入命令，如果该命令行的第一个单词不是shell内置的命令，那么shell会认为这是个文件，运行后等待下一个指令的输入。</p>
<h3 id="1-3-1系统的硬件"><a href="#1-3-1系统的硬件" class="headerlink" title="1.3.1系统的硬件"></a>1.3.1系统的硬件</h3><p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-1/image-20220126183312872.png"></p>
<h4 id="1-总线"><a href="#1-总线" class="headerlink" title="1.总线"></a>1.总线</h4><p>总线是贯穿系统的一组电子管道，它可以用来携带信息字节，从而穿梭在各个部件之间串联起来整个系统。通常被设计成传送定长的字节块，我们成为字。字是一个参数，一般有32位和64位。</p>
<h4 id="2、I-x2F-O设备"><a href="#2、I-x2F-O设备" class="headerlink" title="2、I&#x2F;O设备"></a>2、I&#x2F;O设备</h4><p>这是输入输出的设备每个设备都通过适配器或者控制器与总线相连。</p>
<p>适配器是一块插在主板上的卡，如显示屏。</p>
<p>控制器是I&#x2F;O设备或者是系统主印制电路板（主板）上的芯片组。</p>
<h4 id="3、主存"><a href="#3、主存" class="headerlink" title="3、主存"></a>3、主存</h4><p>主存是临时储存设备，当CPU执行程序时，用来存放程序和程序处理数据，主存是由一组动态随机存取存储器DRAM芯片组成，每个字节上都有唯一的地址。</p>
<h4 id="4、处理器"><a href="#4、处理器" class="headerlink" title="4、处理器"></a>4、处理器</h4><p>处理器就是cpu，是解释和存储在主存中的指令引擎，核心是寄存器，使其指向下一条指令，叫做pc，pc总指向某条机器语言的地址。</p>
<p>加载：由主存开始copy一个字节或一个字到寄存器，并覆盖寄存器内容</p>
<p>存储：从寄存器copy一个字节或一个字到主存，覆盖原来内容</p>
<p>操作：把两个寄存器的值copy到算数逻辑单元（ALU）中，ALU进行运算，并把结果给一个寄存器，覆盖其内容</p>
<p>跳转：从指令本身抽取一个字，并将该字copy到pc中，覆盖pc中的值</p>
<h3 id="1-3-2运行程序"><a href="#1-3-2运行程序" class="headerlink" title="1.3.2运行程序"></a>1.3.2运行程序</h3><p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-1/image-20220126224743971.png"></p>
<p>当我在shell中按下回车，代码被加载到主存，处理器执行程序机器语言，将字符串从主存复制到寄存器中，由寄存器在显示到显示设备中</p>
<h3 id="1-4高速缓存"><a href="#1-4高速缓存" class="headerlink" title="1.4高速缓存"></a>1.4高速缓存</h3><p>机械原理：较大存储设备要比较小存储设备运行的慢，而快速设备“造价”高，所以如何加快且消耗少。处理器存储信息少，速度fast，主存相反，我们采用高速缓存存储器，作为暂时集结区，比如cpu上L1高速缓存容量数万字节，访问速度和寄存器差不多，一个数百w的L2存储器通过总线连接到处理器，虽然L2不是那么fast，但仍比原来fast10倍。L1，L2是由静态随机访问存储器SRAM硬件技术实现，利用率高速缓存的局部性原理</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-1/image-20220126225811627.png"></p>
<h3 id="1-5存储设备形成层次结构"><a href="#1-5存储设备形成层次结构" class="headerlink" title="1.5存储设备形成层次结构"></a>1.5存储设备形成层次结构</h3><p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-1/image-20220126225849940.png"></p>
<p>上一级是下一级的高速缓存。</p>
<h3 id="1-6操作系统功能"><a href="#1-6操作系统功能" class="headerlink" title="1.6操作系统功能"></a>1.6操作系统功能</h3><p>两个功能：1、防止硬件被失控的app滥用</p>
<p>2、向应用程序提供简单的机制来控制复杂且不同的低级硬件设备，操作系统通过抽象的概念实现功能</p>
<h4 id="1-6-1进程"><a href="#1-6-1进程" class="headerlink" title="1.6.1进程"></a>1.6.1进程</h4><p>进程是操作系统对一个正在进行的程序的一种抽象，在一个系统上可以同时运行多个进程，而每个进程都在使用hardware，即我们的CPU是在不断进行交错执行，如下图。</p>
<p>操作系统保持跟踪进程运行所需的所有状态信息，这种状态称为上下文，切到另一个程序叫做上下文切换，保存上面进程恢复下面进程</p>
<p>一个进程转移另一个进程是由内核kernel管理的，shell是进程，但kernel并不是进程，他是系统管理全部进程所用代码和数据结构的集合</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-1/image-20220126230455324.png"></p>
<h4 id="1-6-2线程"><a href="#1-6-2线程" class="headerlink" title="1.6.2线程"></a>1.6.2线程</h4><p>一般认为一个进程只有一个线程控制，但实际上一个进程由多个线程控制。</p>
<h4 id="1-6-3虚拟内存"><a href="#1-6-3虚拟内存" class="headerlink" title="1.6.3虚拟内存"></a>1.6.3虚拟内存</h4><p>虚拟内存是个抽象概念，为每个进程提供给假象，，每个进程看到的内存都一样，成为虚拟地址空间</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-1/image-20220126231637917.png"></p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-1/image-20220126231645698.png"></p>
<h4 id="1-6-4文件"><a href="#1-6-4文件" class="headerlink" title="1.6.4文件"></a>1.6.4文件</h4><p>文件就是字节序列，所有的输入输出甚至设备都能看成文件。</p>
<h3 id="1-7系统之间利用网络通信"><a href="#1-7系统之间利用网络通信" class="headerlink" title="1.7系统之间利用网络通信"></a>1.7系统之间利用网络通信</h3><p>如果将网络视为一个I&#x2F;O设备，那么能得到下面的图片。</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-1/image-20220126232302742.png"></p>
<h4 id="1-8-1Amdahl定律"><a href="#1-8-1Amdahl定律" class="headerlink" title="1.8.1Amdahl定律"></a>1.8.1Amdahl定律</h4><p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-1/image-20220126232446158.png"></p>
<h4 id="1-8-2并发和并行"><a href="#1-8-2并发和并行" class="headerlink" title="1.8.2并发和并行"></a>1.8.2并发和并行</h4><p>并发是指一个同时具有多个活动的系统</p>
<p>并行是指用并发使一个系统运行更快</p>
<h4 id="1-线程级并发"><a href="#1-线程级并发" class="headerlink" title="1.线程级并发"></a>1.线程级并发</h4><p>使用线程我们能在一个进程中执行多个控制流</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-1/image-20220126233152306.png"></p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-1/image-20220126233221807.png"></p>
<h5 id="1-8-3指令级并行"><a href="#1-8-3指令级并行" class="headerlink" title="1.8.3指令级并行"></a>1.8.3指令级并行</h5><p>如果cpu能达到比一个周期一条指令更快的执行速度，就称为超标量处理器。</p>
<h5 id="1-8-4单指令、多数据并行"><a href="#1-8-4单指令、多数据并行" class="headerlink" title="1.8.4单指令、多数据并行"></a>1.8.4单指令、多数据并行</h5><p><img src="/2022/01/26/CSAPP/image-20220126233440876.png"></p>
<h1 id="csapp-2：信息的表示和处理"><a href="#csapp-2：信息的表示和处理" class="headerlink" title="csapp-2：信息的表示和处理"></a>csapp-2：信息的表示和处理</h1><h2 id="2-1、信息存储"><a href="#2-1、信息存储" class="headerlink" title="2.1、信息存储"></a>2.1、信息存储</h2><p>大多数计算器采用8位的块，或者字节，作为最小的可寻址的内存单位，而不是访问内存中单独的位。机器级程序将内存视为非常大的字节数组，成为虚拟内存。</p>
<p>程序对象：包括程序数据、指令和控制信息。</p>
<h3 id="2-1-1、16进制表示法"><a href="#2-1-1、16进制表示法" class="headerlink" title="2.1.1、16进制表示法"></a>2.1.1、16进制表示法</h3><p>二进制转换16进制，先分成4个一组，如果不足四个，最左侧可以不足4位前方补0，然后每4个转换成一个16进制数。</p>
<h4 id="2-1-2、字数据大小"><a href="#2-1-2、字数据大小" class="headerlink" title="2.1.2、字数据大小"></a>2.1.2、字数据大小</h4><p>每个计算机都有一个字长，指明指针数据的标称大小，因为虚拟地址是以这一个字来编码的，字长决定系统参数也就是虚拟地址空间的最大大小</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-2/image-20220205103509225.png"></p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-2/image-20220205103625702.png"></p>
<p>char虽然是单字节，但也能存储整数值，long在32位是4字节，在64是8字节，int32_t和int64_t分别是4和8字节，float是单精度，double是双精度，分别4字节和8字节</p>
<h3 id="2-1-3、寻址和字节顺序"><a href="#2-1-3、寻址和字节顺序" class="headerlink" title="2.1.3、寻址和字节顺序"></a>2.1.3、寻址和字节顺序</h3><p>小端序和大端序：</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-2/image-20220205104800188.png"></p>
<p>通过实验我们知道，在linux 32、windows和linux 64用的都是小端序，sun用的是大端序</p>
<h3 id="2-1-4、字符串"><a href="#2-1-4、字符串" class="headerlink" title="2.1.4、字符串"></a>2.1.4、字符串</h3><p>字符串在任何系统上都是一样的</p>
<h3 id="2-1-5、代码"><a href="#2-1-5、代码" class="headerlink" title="2.1.5、代码"></a>2.1.5、代码</h3><p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-2/image-20220205110346437.png"></p>
<h3 id="2-1-6、布尔代数"><a href="#2-1-6、布尔代数" class="headerlink" title="2.1.6、布尔代数"></a>2.1.6、布尔代数</h3><p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-2/image-20220205110708464.png"></p>
<p>&amp;：位上都是1才是1，其余是0</p>
<p>|：有1就是1，全0才是0</p>
<p>^：相同就是0</p>
<p>~：取反</p>
<h3 id="2-1-7、c语言中的移位运算"><a href="#2-1-7、c语言中的移位运算" class="headerlink" title="2.1.7、c语言中的移位运算"></a>2.1.7、c语言中的移位运算</h3><p>向左移动x位，去掉前x位右边补0</p>
<p>向右移动分两种情况</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-2/image-20220205112220948.png"></p>
<p>加法的优先级高于移位，牵扯到移位要加括号</p>
<h2 id="2-2、整数表示"><a href="#2-2、整数表示" class="headerlink" title="2.2、整数表示"></a>2.2、整数表示</h2><p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-2/image-20220207140008362.png"></p>
<h3 id="2-2-1、整形数据类型"><a href="#2-2-1、整形数据类型" class="headerlink" title="2.2.1、整形数据类型"></a>2.2.1、整形数据类型</h3><p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-2/image-20220207140353073.png"></p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-2/image-20220207140403917.png"></p>
<p>注意负数是比正数多一位的，因为有0.</p>
<h3 id="2-2-2、无符号数的编码-B2U"><a href="#2-2-2、无符号数的编码-B2U" class="headerlink" title="2.2.2、无符号数的编码(B2U)"></a>2.2.2、无符号数的编码(B2U)</h3><p>无符号数的编码是具有唯一性的，每一个二进制都完全等于一个整数，反过来同理。</p>
<h3 id="2-2-3、补码编码（B2T"><a href="#2-2-3、补码编码（B2T" class="headerlink" title="2.2.3、补码编码（B2T)"></a>2.2.3、补码编码（B2T)</h3><p>表示负数，采用补码，当第一位是1，那么这个数就是负数，如果是0，那么这个表示正数</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-2/image-20220207141727279.png"></p>
<p>第一位是1，那么第1位就是负数，剩下的是整数相加</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-2/image-20220207144402298.png"></p>
<h3 id="2-2-4、有符号数和无符号数转换"><a href="#2-2-4、有符号数和无符号数转换" class="headerlink" title="2.2.4、有符号数和无符号数转换"></a>2.2.4、有符号数和无符号数转换</h3><p>规则是，先把数据转换成二进制，如果是转换层无符号数，那么就按其标准转换，即不看第一位</p>
<p>如果是转换成有符号数，我们要考虑补码</p>
<h3 id="2-2-5、c中的有符号和无符号数"><a href="#2-2-5、c中的有符号和无符号数" class="headerlink" title="2.2.5、c中的有符号和无符号数"></a>2.2.5、c中的有符号和无符号数</h3><p>创建无符号数必须要在字符后加‘u’或者’U’,其他声明都是有符号。当在运算时，一个是有符号，另一个没有符号，那么会强制把有符号转换成无符号，并假设两个数都是非负，在大于小于的比较中</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-2/image-20220207151533153.png"></p>
<h3 id="2-2-6、拓展一个数字的位显示"><a href="#2-2-6、拓展一个数字的位显示" class="headerlink" title="2.2.6、拓展一个数字的位显示"></a>2.2.6、拓展一个数字的位显示</h3><p>将无符号数转换成一个更大的数据类型，我们只需要在开头加0，这叫做零拓展</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-2/image-20220207161439255.png"></p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-2/image-20220207161453816.png"></p>
<p>前提是全部是有符号数</p>
<h3 id="2-2-7、截断数字"><a href="#2-2-7、截断数字" class="headerlink" title="2.2.7、截断数字"></a>2.2.7、截断数字</h3><p>截断无符号数：</p>
<p>留下后k位（k位截断数）</p>
<p>截断补码数：</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-2/image-20220207162119452.png"></p>
<h2 id="2-3整数运算"><a href="#2-3整数运算" class="headerlink" title="2.3整数运算"></a>2.3整数运算</h2><p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-2/image-20220207162845253.png"></p>
<p>从上述文字，我们知道，当x，y在定义域内，但x+y可不一定，若x+y溢出了区域，我们直接将二进制的第一位移除，或者用整数减去x定义域的最大值。判断是否溢出，用x+y是否小于x。</p>
<p>2.3.2、补码加法</p>
<p>与上面是一样的，如果超出则减去，低于则加上位数，即加法后的结果不能够超出本身的位数，否则截断！</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-2/image-20220207163635330.png"></p>
<p>2.3.3、补码的非</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-2/image-20220207164514250.png"></p>
<p>x&#x3D;-（-x（非）+1）（负号）</p>
<p>2.3.4、无符号乘法</p>
<p>超出范围，用截断。</p>
<p>2.3.5、补码乘法</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-2/image-20220207164803252.png"></p>
<p>一样</p>
<p>2.3.6、乘常数</p>
<p>在位的模式下进行左移位，如果溢出，截断即可。乘法的使用代价是加法等的10倍</p>
<p>2.3.7、除以2的幂</p>
<p>除以2的幂我们需要将数据右移，无符号和补码数需要使用逻辑移位和算数移位来达到目的。</p>
<p>对于补码数，分为两种情况，若最高位0，即正数，直接移位，若是1，左侧补1，其他位右移即可。</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-2/image-20220208220140308.png"></p>
<p>如果用x&#x2F;2**k,那么如果是小数,那么就向下取整</p>
<p>2.4  浮点数</p>
<p>2.4.1 二进制小数</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-2/image-20220208220651497.png"></p>
<p>上述例子很好的反映了什么是二进制小数.</p>
<p>2.4.2 IEEE浮点表示</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-2/image-20220208221508778.png"></p>
<p>简单来说就是,将一个数分为三段,先看第一个值判断是正数还是负数,第三个部分是从右侧开始的0一直到左侧不为0的数,剩余的为第二部分.</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-2/image-20220208222422119.png"></p>
<p>2.4.3 数字示例</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-2/image-20220209102633405.png"></p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-2/image-20220209102650709.png"></p>
<p>2.4.4、舍入</p>
<p>有4种规则</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-2/image-20220209102721969.png"></p>
<p>2.4.5、c语言的浮点数</p>
<p>默认32位int</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-2/image-20220209102820327.png"></p>
<h1 id="CSAPP-3"><a href="#CSAPP-3" class="headerlink" title="CSAPP-3"></a>CSAPP-3</h1><p>从这章开始，开始接触汇编和机器语言！这章比上一章看的舒服点。</p>
<h2 id="3-1、程序编码"><a href="#3-1、程序编码" class="headerlink" title="3.1、程序编码"></a>3.1、程序编码</h2><p>在linux系统编码c语言指令需要掌握：</p>
<figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">linux</span>&gt; gcc -Og -o p <span class="built_in">p1</span>.c</span><br></pre></td></tr></table></figure>

<h3 id="3-1-1、机器代码"><a href="#3-1-1、机器代码" class="headerlink" title="3.1.1、机器代码"></a>3.1.1、机器代码</h3><p>程序计数器：通常称为P，在x86-64通常用%rip来表示。</p>
<p>整数寄存器文件包含16个命名的位置，分别存储64位的值</p>
<p>条件码寄存器保存最近执行的算数或者逻辑运算，如实现if或while语句</p>
<p>一组向量寄存器可存放一个或多个整数或浮点数</p>
<h2 id="3-2数据格式"><a href="#3-2数据格式" class="headerlink" title="3.2数据格式"></a>3.2数据格式</h2><p>在intel中规定字代表16位，双字代表32位，四字代表64位</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-3/image-20220303220910142.png"></p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-3/image-20220303221116240.png"></p>
<p>计算机永远是占用内存越小越好，比如一个数是int，只用不到4位，那么这个数就是按4个位算。用不到32位。</p>
<h2 id="3-3、操作数"><a href="#3-3、操作数" class="headerlink" title="3.3、操作数"></a>3.3、操作数</h2><p>三种操作数：</p>
<p>1.立即数，用$555表示</p>
<p>2.寄存器，16位寄存器用低字节寄存器作为操作数</p>
<p>3.内存引用，用【】表示内存引用</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-3/image-20220303224704891.png"></p>
<p>这样的运算是需要掌握的</p>
<h3 id="3-3-1、数据传送指令"><a href="#3-3-1、数据传送指令" class="headerlink" title="3.3.1、数据传送指令"></a>3.3.1、数据传送指令</h3><p>mov指令，mov a，b：是将a传送到b。</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-3/image-20220304123732270.png"></p>
<p>我们把指令后的第一个数据称为源操作数，第二个数据为目的操作数，下面是5种用法</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-3/image-20220304123936154.png"></p>
<p>访问寄存器比访问内存快，所以一般将局部变量保存在寄存器中</p>
<h3 id="3-3-2、压入和弹出栈数据"><a href="#3-3-2、压入和弹出栈数据" class="headerlink" title="3.3.2、压入和弹出栈数据"></a>3.3.2、压入和弹出栈数据</h3><p>栈是一种数据结构，可以添加或者删除值，要遵循后进先出的原则，用push将数据压入栈中，用pop删除数据，存在属性：弹出之永远是最近被压入而且仍然在栈中的值。，永远记得这个只有一个操作数：</p>
<p>push %rbp完全等价于sub 8，%rsp    mov %rbp， （%rsp），也就是说在push的时候就已经开辟了空间</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-3/image-20220304125453591.png"></p>
<h2 id="3-4、算数和逻辑操作"><a href="#3-4、算数和逻辑操作" class="headerlink" title="3.4、算数和逻辑操作"></a>3.4、算数和逻辑操作</h2><p>add一样也是4个指令addb，addw，addl，addq</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-3/image-20220304125624929.png"></p>
<p>其中lea主要是加载地址，上述所有运算几乎都是将源操作数与目的操作数进行运算后存入目的操作数。</p>
<h3 id="3-4-1、加载有效地址"><a href="#3-4-1、加载有效地址" class="headerlink" title="3.4.1、加载有效地址"></a>3.4.1、加载有效地址</h3><p>lea目的操作数必须是一个寄存器</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-3/image-20220304130326450.png"></p>
<h3 id="3-4-2、一元和二元操作数"><a href="#3-4-2、一元和二元操作数" class="headerlink" title="3.4.2、一元和二元操作数"></a>3.4.2、一元和二元操作数</h3><p>这个操作数既是源操作数还是目的操作数，比如inc（%rsp）让栈顶+1，相当于++</p>
<p>二元操作，第二个操作数既是源又是目的，很像x-&#x3D;y    sub %rax,%rdx是让rdx-rax的值</p>
<h3 id="3-4-3、移位操作"><a href="#3-4-3、移位操作" class="headerlink" title="3.4.3、移位操作"></a>3.4.3、移位操作</h3><p>左移：sal，shl无差别</p>
<p>右移：sar（算数移位）shr（逻辑移位）</p>
<h3 id="3-4-4、特殊算数操作"><a href="#3-4-4、特殊算数操作" class="headerlink" title="3.4.4、特殊算数操作"></a>3.4.4、特殊算数操作</h3><p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-3/image-20220304132847111.png"></p>
<h2 id="3-5、控制"><a href="#3-5、控制" class="headerlink" title="3.5、控制"></a>3.5、控制</h2><h3 id="3-5-1、条件码"><a href="#3-5-1、条件码" class="headerlink" title="3.5.1、条件码"></a>3.5.1、条件码</h3><p>CF：进位标志。最近的操作使最高位产生进位。可用来检查无符号操作的溢出</p>
<p>ZF：零标志。最近的操作得出结果为0.</p>
<p>SF：符号标志。最近的操作得到的结果为负数。</p>
<p>OF：溢出标志。最近的操作导致一个补码溢出–正溢出活着负溢出</p>
<p>比如test %rax，%rax就是检查%rax是负数，0，还是正数。</p>
<p>如cmp的比较可以确定范围从而进行循环</p>
<h3 id="3-5-2、访问条件码"><a href="#3-5-2、访问条件码" class="headerlink" title="3.5.2、访问条件码"></a>3.5.2、访问条件码</h3><p>条件码使用三种方法：</p>
<p>1.可以根据条件码的某种组合，将一个字节设为0或者1</p>
<p>2.可以跳转到程序的其他部分</p>
<p>3.可以有条件的传送数据</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-3/image-20220309135243852.png"></p>
<h3 id="3-5-3、跳转指令"><a href="#3-5-3、跳转指令" class="headerlink" title="3.5.3、跳转指令"></a>3.5.3、跳转指令</h3><p>jmp是无条件跳转</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-3/image-20220309135548164.png"></p>
<h3 id="3-5-4、跳转编码"><a href="#3-5-4、跳转编码" class="headerlink" title="3.5.4、跳转编码"></a>3.5.4、跳转编码</h3><p>分为两种，最常用的是PC相对的，会将跳转指令的地址与紧邻在跳转指令后面的那条指令的差作为编码，还有一种是给出绝对地址，用4个字节直接跳转到目标地址</p>
<h3 id="3-5-5、用条件控制来实现条件分支"><a href="#3-5-5、用条件控制来实现条件分支" class="headerlink" title="3.5.5、用条件控制来实现条件分支"></a>3.5.5、用条件控制来实现条件分支</h3><p>类似于goto的写法，就是先对比，对比来决定是否goto</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-3/image-20220309140304334.png"></p>
<h3 id="3-5-6、用条件传送来实现条件分支"><a href="#3-5-6、用条件传送来实现条件分支" class="headerlink" title="3.5.6、用条件传送来实现条件分支"></a>3.5.6、用条件传送来实现条件分支</h3><p>上面用条件控制实现是非常低效的。我们这种方法是将两种结果都进行计算，然后再根据条件满足与否来选择结果</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-3/image-20220309140646395.png"></p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-3/image-20220309140823490.png"></p>
<h3 id="3-5-7、循环"><a href="#3-5-7、循环" class="headerlink" title="3.5.7、循环"></a>3.5.7、循环</h3><p>上述是讲的if这样的判断，但其实循环跟上面的原理是差不多的</p>
<p>先看do-while</p>
<p>这个底层的逻辑跟上层逻辑是一样的，先do然后判断</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-3/image-20220309141045501.png"></p>
<p>while函数与do-while是不同的，先对while中的参数进行求值，然后根据条件码进行是否进入循环体的判断</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-3/image-20220309141213694.png"></p>
<p>当然还有第二种方法，称之为guard-do，先用条件分支，如果初始条件不成立就跳过循环，然后变成do-while循环</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-3/image-20220309141343757.png"></p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-3/image-20220309141348611.png"></p>
<p>for循环程序先对第一个参数求值，然后进入循环，再循环中测试第二个参数，在判断是否进入第三个参数是否继续到循环里执行2，通过不同的优化等级，也有两种汇编来执行，不再赘述。</p>
<p>switch语句，switch可通过一个整数索引值进行多重分支，通过跳转表来实现，相当于跳转表是数组，然后那个整数值就是索引值</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-3/image-20220309142149530.png"></p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-3/image-20220309142155379.png"></p>
<p>jmp指令的操作数前有*代表是见解跳转。rodata叫做只读数据。</p>
<h2 id="3-6、过程"><a href="#3-6、过程" class="headerlink" title="3.6、过程"></a>3.6、过程</h2><p>过程是一种抽象，提供一种封装代码方法，简单来说就是由一组参数经过过程来产生一个返回值过程有很多种：函数，方法，子过程，子例程，处理函数等</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-3/image-20220309142541692.png"></p>
<h3 id="3-6-1、运行时栈"><a href="#3-6-1、运行时栈" class="headerlink" title="3.6.1、运行时栈"></a>3.6.1、运行时栈</h3><p>栈是后进先出的，在过程p调用q过程的时候：</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-3/image-20220309142756951.png"></p>
<p>在x86-64过程中，若需要的存储空间超过寄存器能存放的大小时，就会在栈上分配空间，这个过程叫<strong>栈帧</strong></p>
<p>一般的在过程中超过6个参数就需要栈了</p>
<h3 id="3-6-2、转移控制"><a href="#3-6-2、转移控制" class="headerlink" title="3.6.2、转移控制"></a>3.6.2、转移控制</h3><p>将控制从p转移到q只需要将PC设置成q代码起始地址，但仍要记得p当前指令地址</p>
<h3 id="3-6-3、数据传送"><a href="#3-6-3、数据传送" class="headerlink" title="3.6.3、数据传送"></a>3.6.3、数据传送</h3><p>传入参数不一定一定用r开头寄存器，可以根据传入参数位数选择寄存器，数据传送讲的就是6个以上参数，从第七开始会转移到栈上</p>
<h3 id="3-6-4、栈上的局部存储"><a href="#3-6-4、栈上的局部存储" class="headerlink" title="3.6.4、栈上的局部存储"></a>3.6.4、栈上的局部存储</h3><p>有几种情况局部内存必须放在内存中：<br>寄存器不足够存放所有本地数据</p>
<p>对一个局部变量使用地址运算符‘&amp;’，因此必须要有地址</p>
<p>某些局部变量是数组或者结构，因此必须能够通过数组或结构引用访问</p>
<h3 id="3-6-5、寄存器中的局部存储空间"><a href="#3-6-5、寄存器中的局部存储空间" class="headerlink" title="3.6.5、寄存器中的局部存储空间"></a>3.6.5、寄存器中的局部存储空间</h3><p>寄存器是唯一被所有过程共享的资源，过程中的被调用者不会覆盖调用者稍后会使用寄存器</p>
<h2 id="3-7、数组分配和访问"><a href="#3-7、数组分配和访问" class="headerlink" title="3.7、数组分配和访问"></a>3.7、数组分配和访问</h2><h3 id="3-7-1、基本原则"><a href="#3-7-1、基本原则" class="headerlink" title="3.7.1、基本原则"></a>3.7.1、基本原则</h3><p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-3/image-20220309151916807.png"></p>
<h3 id="3-7-2、指针运算"><a href="#3-7-2、指针运算" class="headerlink" title="3.7.2、指针运算"></a>3.7.2、指针运算</h3><p>&amp;和*可以产生和间接引用指针，我们要知道的就是下面这个表</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-3/image-20220309152719554.png"></p>
<h3 id="3-7-3、嵌套的数组"><a href="#3-7-3、嵌套的数组" class="headerlink" title="3.7.3、嵌套的数组"></a>3.7.3、嵌套的数组</h3><p>对于二维数组</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-3/image-20220309152817073.png"></p>
<p>上面数组的以下面来解释：</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-3/image-20220309152806881.png"></p>
<p>我们从汇编求出来C就是列，L就是T的字节大小</p>
<h3 id="3-7-4、定长数组"><a href="#3-7-4、定长数组" class="headerlink" title="3.7.4、定长数组"></a>3.7.4、定长数组</h3><p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-3/image-20220309153035920.png"></p>
<h3 id="3-7-5、变长数组"><a href="#3-7-5、变长数组" class="headerlink" title="3.7.5、变长数组"></a>3.7.5、变长数组</h3><h2 id="3-8、异质的数据结构"><a href="#3-8、异质的数据结构" class="headerlink" title="3.8、异质的数据结构"></a>3.8、异质的数据结构</h2><p>主要介绍struct和union</p>
<h3 id="3-8-1、结构"><a href="#3-8-1、结构" class="headerlink" title="3.8.1、结构"></a>3.8.1、结构</h3><p>struct将不同类型的对象聚合到一个对象中，类似数组，一幅图直接理解</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-3/image-20220309153400037.png"></p>
<h3 id="3-8-2、联合"><a href="#3-8-2、联合" class="headerlink" title="3.8.2、联合"></a>3.8.2、联合</h3><p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-3/image-20220309153435851.png"></p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-3/image-20220309153441198.png"></p>
<p>一个联合总的大小等于它最大字段的大小，总之联合可以带来的节省很小</p>
<h3 id="3-8-3、数据对齐"><a href="#3-8-3、数据对齐" class="headerlink" title="3.8.3、数据对齐"></a>3.8.3、数据对齐</h3><p>主要就是一个处理器要是从内存取8字节，那么地址必须是8的倍数</p>
<h2 id="3-9、安全漏洞"><a href="#3-9、安全漏洞" class="headerlink" title="3.9、安全漏洞"></a>3.9、安全漏洞</h2><h3 id="3-9-1、gdb操作"><a href="#3-9-1、gdb操作" class="headerlink" title="3.9.1、gdb操作"></a>3.9.1、gdb操作</h3><p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-3/image-20220309153801221.png"></p>
<h3 id="3-9-2、内存越界和缓冲区溢出"><a href="#3-9-2、内存越界和缓冲区溢出" class="headerlink" title="3.9.2、内存越界和缓冲区溢出"></a>3.9.2、内存越界和缓冲区溢出</h3><p>这是pwn里的攻击方法,比如gets来输入字符串，超出输入范围那么就叫缓冲区溢出，当字符串边长，就会覆盖栈上存储的某些信息，比如未被使用的栈空间，返回地址，caller里保存的状态。。。当返回被破坏，那么我们完全可以ret到我们想要的地方，比如shell中</p>
<h3 id="3-9-3、对抗缓冲区溢出"><a href="#3-9-3、对抗缓冲区溢出" class="headerlink" title="3.9.3、对抗缓冲区溢出"></a>3.9.3、对抗缓冲区溢出</h3><p>比如我们会在文件中加入防护措施。</p>
<h4 id="1、栈随机化也叫ALSR"><a href="#1、栈随机化也叫ALSR" class="headerlink" title="1、栈随机化也叫ALSR"></a>1、栈随机化也叫ALSR</h4><p>这个很常见，原理：在程序开始时，在栈上分配一段0~n字节的随机大小空间，程序不需要这段空间，所以每次栈空间都是随机的。</p>
<h4 id="2、栈破坏检测也叫canary"><a href="#2、栈破坏检测也叫canary" class="headerlink" title="2、栈破坏检测也叫canary"></a>2、栈破坏检测也叫canary</h4><p>我们尝试在数组即将越界时检测到它，其思想是在栈帧任何局部缓冲区与栈状态之间存储一个特殊的canary值，这个值随机产生，这个值是只读。</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-3/image-20220309161412343.png"></p>
<p>如果存贮值与canary值相同异或就为0，那么程序继续</p>
<h4 id="3、限制可执行代码区域NX"><a href="#3、限制可执行代码区域NX" class="headerlink" title="3、限制可执行代码区域NX"></a>3、限制可执行代码区域NX</h4><p>这一招是消除攻击者插入代码的权力，只有保存在编译器产生的代码的那部分内存才是可执行的，其余只能读和写。</p>
<h3 id="3-9-4、支持变长栈帧"><a href="#3-9-4、支持变长栈帧" class="headerlink" title="3.9.4、支持变长栈帧"></a>3.9.4、支持变长栈帧</h3><p>%rbp作为帧指针，或者叫做基地址.</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-3/image-20220309163604767.png"></p>
<h2 id="3-10、浮点代码"><a href="#3-10、浮点代码" class="headerlink" title="3.10、浮点代码"></a>3.10、浮点代码</h2><p>处理器的浮点体系结构包括多个方面：</p>
<p>如何存储和访问浮点数值。通常是通过某种寄存器方式完成</p>
<p>对浮点数据操作的指令</p>
<p>向函数传递浮点数参数和从函数返回浮点数结果的规则</p>
<p>函数调用过程中保存寄存器的规则：一些寄存器被指定为调用者保存，而其他的被指定为被调用者保存</p>
<p>历史问题：</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-3/image-20220309164838805.png"></p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-3/image-20220309164845071.png"></p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-3/image-20220309164852994.png"></p>
<h3 id="3-10-1、浮点传送和转换操作"><a href="#3-10-1、浮点传送和转换操作" class="headerlink" title="3.10.1、浮点传送和转换操作"></a>3.10.1、浮点传送和转换操作</h3><p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-3/image-20220309165031493.png"></p>
<p>若把浮点数转换成整数时，指令进行截断，向0舍入。</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-3/image-20220309165157591.png"></p>
<p>上面忽略第二个操作数，因为他只会影响结果的高位字节，一半第二个操作数跟目的操作数是一样的。</p>
<p>vunpcklps通常交叉放置来自两个xmm寄存器的值，储存在第三个寄存器</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-3/image-20220309165457631.png"></p>
<h3 id="3-10-2、过程中的浮点代码"><a href="#3-10-2、过程中的浮点代码" class="headerlink" title="3.10.2、过程中的浮点代码"></a>3.10.2、过程中的浮点代码</h3><p>过程：xmm寄存器用来向函数传参，然后返回值</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-3/image-20220309165638590.png" alt="image-20220309165638590"></p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-3/image-20220309165653801.png" alt="image-20220309165653801"></p>
<p>若函数包含指针，整数和浮点数混合参数时，指针和整数通过寄存器传递，而浮点值通过xmm寄存器传递</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-3/image-20220309165753954.png"></p>
<h3 id="3-10-3、浮点数运算操作"><a href="#3-10-3、浮点数运算操作" class="headerlink" title="3.10.3、浮点数运算操作"></a>3.10.3、浮点数运算操作</h3><p>第一个源操作数可以是一个xmm寄存器或内存位置，第二个源操作数和目的操作数必须是xmm寄存器。每个操作都有一条针对单精度的指令和一条针对双精度的指令，结果存放在目的寄存器。</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-3/image-20220309170014341.png" alt="image-20220309170014341"></p>
<h3 id="3-10-4、定义和使用浮点数"><a href="#3-10-4、定义和使用浮点数" class="headerlink" title="3.10.4、定义和使用浮点数"></a>3.10.4、定义和使用浮点数</h3><p>与整数操作不同，AVX浮点操作不能以立即数作为操作数。</p>
<h3 id="3-10-5、在浮点代码中使用位级操作"><a href="#3-10-5、在浮点代码中使用位级操作" class="headerlink" title="3.10.5、在浮点代码中使用位级操作"></a>3.10.5、在浮点代码中使用位级操作</h3><p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-3/image-20220309170420708.png"></p>
<h3 id="3-10-6、浮点比较操作"><a href="#3-10-6、浮点比较操作" class="headerlink" title="3.10.6、浮点比较操作"></a>3.10.6、浮点比较操作</h3><p>类似于cmp指令</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-3/image-20220309170500224.png"></p>
<p>也有三个条件码</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-3/image-20220309170518471.png"></p>
<p>结束：</p>
<p>这篇学到了很多汇编知识，理解了底层的逻辑。</p>
<p>收获很多，继续加油！</p>
<h1 id="CSAPP-LAB"><a href="#CSAPP-LAB" class="headerlink" title="CSAPP-LAB"></a>CSAPP-LAB</h1><h2 id="DataLab"><a href="#DataLab" class="headerlink" title="DataLab"></a>DataLab</h2><p>我只能说，太难想了。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> * CS:APP Data Lab </span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * &lt;Please put your name and userid here&gt;</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * bits.c - Source file with your solutions to the Lab.</span></span><br><span class="line"><span class="comment"> * This is the file you will hand in to your instructor.</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment"> * WARNING: Do not include the &lt;stdio.h&gt; header; it confuses the dlc</span></span><br><span class="line"><span class="comment"> * compiler. You can still use printf for debugging without including</span></span><br><span class="line"><span class="comment"> * &lt;stdio.h&gt;, although you might get a compiler warning. In general,</span></span><br><span class="line"><span class="comment"> * it&#x27;s not good practice to ignore compiler warnings, but in this</span></span><br><span class="line"><span class="comment"> * case it&#x27;s OK.  </span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">if</span> 0</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> * Instructions to Students:</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment"> * STEP 1: Read the following instructions carefully.</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line"></span><br><span class="line">You will provide your solution to the Data Lab by</span><br><span class="line">editing the collection of functions in this source file.</span><br><span class="line"></span><br><span class="line">INTEGER CODING RULES:</span><br><span class="line"></span><br><span class="line">  Replace the <span class="string">&quot;return&quot;</span> statement in each function with one</span><br><span class="line">  or more lines of C code that implements the function. Your code </span><br><span class="line">  must conform to the following style:</span><br><span class="line"></span><br><span class="line">  <span class="type">int</span> <span class="title function_">Funct</span><span class="params">(arg1, arg2, ...)</span> &#123;</span><br><span class="line">      <span class="comment">/* brief description of how your implementation works */</span></span><br><span class="line">      <span class="type">int</span> var1 = Expr1;</span><br><span class="line">      ...</span><br><span class="line">      <span class="type">int</span> varM = ExprM;</span><br><span class="line"></span><br><span class="line">​      varJ = ExprJ;</span><br><span class="line">​      ...</span><br><span class="line">​      varN = ExprN;</span><br><span class="line">​      <span class="keyword">return</span> ExprR;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  Each <span class="string">&quot;Expr&quot;</span> is an expression using ONLY the following:</span><br><span class="line"></span><br><span class="line">    <span class="number">1.</span> Integer constants <span class="number">0</span> through <span class="number">255</span> (<span class="number">0xFF</span>), inclusive. You are</span><br><span class="line">       not allowed to use big constants such as <span class="number">0xffffffff</span>.</span><br><span class="line">    <span class="number">2.</span> Function arguments and local <span class="title function_">variables</span> <span class="params">(no global variables)</span>.</span><br><span class="line">    3. Unary integer operations ! ~</span><br><span class="line">    4. Binary integer operations &amp; ^ | + &lt;&lt; &gt;&gt;</span><br><span class="line"></span><br><span class="line">  Some of the problems <span class="keyword">restrict</span> the <span class="built_in">set</span> of allowed operators even further.</span><br><span class="line">  Each &quot;Expr&quot; may consist of multiple operators. You are not restricted to</span><br><span class="line">  one operator per line.</span><br><span class="line"></span><br><span class="line">  You are expressly forbidden to:</span><br><span class="line"></span><br><span class="line">    1. Use any control constructs such as <span class="keyword">if</span>, <span class="keyword">do</span>, <span class="keyword">while</span>, <span class="keyword">for</span>, <span class="keyword">switch</span>, etc.</span><br><span class="line">    2. Define or use any macros.</span><br><span class="line">    3. Define any additional functions in this file.</span><br><span class="line">    4. Call any functions.</span><br><span class="line">    5. Use any other operations, such as &amp;&amp;, ||, -, or ?:</span><br><span class="line">    6. Use any form of casting.</span><br><span class="line">    7. Use any data type other than <span class="type">int</span>.  This implies that you</span><br><span class="line">       cannot use arrays, structs, or unions.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  You may assume that your machine:</span><br><span class="line"></span><br><span class="line">    1. Uses 2s complement, 32-bit representations of integers.</span><br><span class="line">    2. Performs right shifts arithmetically.</span><br><span class="line">    3. Has unpredictable behavior when shifting <span class="keyword">if</span> the shift amount</span><br><span class="line">       is less than 0 or greater than 31.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">EXAMPLES OF ACCEPTABLE CODING STYLE:</span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">   * pow2plus1 - returns 2^x + 1, where 0 &lt;= x &lt;= 31</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">       <span class="type">int</span> <span class="title function_">pow2plus1</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">     <span class="comment">/* exploit ability of shifts to compute powers of 2 */</span></span><br><span class="line">     <span class="keyword">return</span> (<span class="number">1</span> &lt;&lt; x) + <span class="number">1</span>;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">   * pow2plus4 - returns 2^x + 4, where 0 &lt;= x &lt;= 31</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">       <span class="type">int</span> <span class="title function_">pow2plus4</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">     <span class="comment">/* exploit ability of shifts to compute powers of 2 */</span></span><br><span class="line">     <span class="type">int</span> result = (<span class="number">1</span> &lt;&lt; x);</span><br><span class="line">     result += <span class="number">4</span>;</span><br><span class="line">     <span class="keyword">return</span> result;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">FLOATING POINT CODING RULES</span><br><span class="line"></span><br><span class="line">For the problems that require you to implement floating-point operations,</span><br><span class="line">the coding rules are less strict.  You are allowed to use looping and</span><br><span class="line">conditional control.  You are allowed to use both ints and unsigneds.</span><br><span class="line">You can use arbitrary integer and <span class="type">unsigned</span> constants. You can use any arithmetic,</span><br><span class="line">logical, or comparison operations on <span class="type">int</span> or <span class="type">unsigned</span> data.</span><br><span class="line"></span><br><span class="line">You are expressly forbidden to:</span><br><span class="line"></span><br><span class="line">    <span class="number">1.</span> Define or use any macros.</span><br><span class="line">    <span class="number">2.</span> Define any additional functions in this file.</span><br><span class="line">    <span class="number">3.</span> Call any functions.</span><br><span class="line">    <span class="number">4.</span> Use any form of casting.</span><br><span class="line">    <span class="number">5.</span> Use any data type other than <span class="type">int</span> or <span class="type">unsigned</span>.  This means that you</span><br><span class="line">       cannot use arrays, structs, or unions.</span><br><span class="line">    <span class="number">6.</span> Use any floating point data types, operations, or constants.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">NOTES:</span><br><span class="line"></span><br><span class="line">    <span class="number">1.</span> Use the <span class="title function_">dlc</span> <span class="params">(data lab checker)</span> <span class="title function_">compiler</span> <span class="params">(described in the handout)</span> to </span><br><span class="line">       check the legality of your solutions.</span><br><span class="line">    2. Each function has a maximum number of <span class="title function_">operations</span> <span class="params">(integer, logical,</span></span><br><span class="line"><span class="params">       or comparison)</span> that you are allowed to use <span class="keyword">for</span> your implementation</span><br><span class="line">       of the function.  The max operator count is checked by dlc.</span><br><span class="line">       Note that <span class="title function_">assignment</span> <span class="params">(<span class="string">&#x27;=&#x27;</span>)</span> is not counted; you may use as many of</span><br><span class="line">       these as you want without penalty.</span><br><span class="line">    <span class="number">3.</span> Use the btest test harness to check your functions <span class="keyword">for</span> correctness.</span><br><span class="line">    <span class="number">4.</span> Use the BDD checker to formally verify your functions</span><br><span class="line">    <span class="number">5.</span> The maximum number of ops <span class="keyword">for</span> each function is given in the</span><br><span class="line">       header comment <span class="keyword">for</span> each function. If there are any inconsistencies </span><br><span class="line">       between the maximum ops in the writeup and in this file, consider</span><br><span class="line">       this file the authoritative source.</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> * STEP 2: Modify the following functions according the coding rules.</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * IMPORTANT. TO AVOID GRADING SURPRISES:</span></span><br><span class="line"><span class="comment"> * 1. Use the dlc compiler to check that your solutions conform</span></span><br><span class="line"><span class="comment"> * to the coding rules.</span></span><br><span class="line"><span class="comment"> * 2. Use the BDD checker to formally verify that your solutions produce </span></span><br><span class="line"><span class="comment"> * the correct answers.</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="comment">//1</span></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> * bitXor - x^y using only ~ and &amp; </span></span><br><span class="line"><span class="comment"> * Example: bitXor(4, 5) = 1</span></span><br><span class="line"><span class="comment"> * Legal ops: ~ &amp;</span></span><br><span class="line"><span class="comment"> * Max ops: 14</span></span><br><span class="line"><span class="comment"> * Rating: 1</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="type">int</span> <span class="title function_">bitXor</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (~((~x) &amp; (~y))) &amp; (~(x &amp; y));<span class="comment">//int是4位，~4就是-5，前面的操作得到0b0101，我们只需0b1011即可，后面构造出来</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> * tmin - return minimum two&#x27;s complement integer </span></span><br><span class="line"><span class="comment"> * Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</span></span><br><span class="line"><span class="comment"> * Max ops: 4</span></span><br><span class="line"><span class="comment"> * Rating: 1</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="type">int</span> <span class="title function_">tmin</span><span class="params">(<span class="type">void</span>)</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="number">0x80</span> &lt;&lt; <span class="number">24</span>;<span class="comment">//0x80 == 0b1000 0000</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//2</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> * isTmax - returns 1 if x is the maximum, two&#x27;s complement number,</span></span><br><span class="line"><span class="comment"> * and 0 otherwise </span></span><br><span class="line"><span class="comment"> * Legal ops: ! ~ &amp; ^ | +</span></span><br><span class="line"><span class="comment"> * Max ops: 10</span></span><br><span class="line"><span class="comment"> * Rating: 1</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="type">int</span> <span class="title function_">isTmax</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">     <span class="type">int</span> i = x + <span class="number">1</span>;<span class="comment">/*我们知道最大值+1就越界了，其实会等于最小值*/</span></span><br><span class="line">     x = x + i;<span class="comment">/*最大值加最小值= -1 ，即0xffff ffff*/</span></span><br><span class="line">     x = ~x;<span class="comment">/*因为0xffff ffff是全1，取反就是0*/</span></span><br><span class="line">     i = !i;<span class="comment">//针对x=-1的情况进行再次运算！</span></span><br><span class="line">     x = x + <span class="number">1</span>;</span><br><span class="line">     <span class="keyword">return</span> !x;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">/* </span></span><br><span class="line"><span class="comment"> * allOddBits - return 1 if all odd-numbered bits in word set to 1</span></span><br><span class="line"><span class="comment"> * where bits are numbered from 0 (least significant) to 31 (most significant)</span></span><br><span class="line"><span class="comment"> * Examples allOddBits(0xFFFFFFFD) = 0, allOddBits(0xAAAAAAAA) = 1</span></span><br><span class="line"><span class="comment"> * Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</span></span><br><span class="line"><span class="comment"> * Max ops: 12</span></span><br><span class="line"><span class="comment"> * Rating: 2</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="type">int</span> <span class="title function_">allOddBits</span><span class="params">(<span class="type">int</span> x)</span><span class="comment">////如果x奇数位全为1，返回1;否则返回0</span></span><br><span class="line">   &#123;</span><br><span class="line">     <span class="keyword">return</span> !((~x) &amp; <span class="number">0XAAAAAAAA</span>);<span class="comment">//0XAAAAAAAA就是奇数位是1</span></span><br><span class="line">     <span class="comment">//若x奇数位上全是1，~x奇数位上全是0，(~X) &amp; 0XAAAAAAAA则奇数位全是0，取！则为1</span></span><br><span class="line">     <span class="comment">//若x奇数位不全为1，~x总有奇数位为0，(~X) &amp; 0XAAAAAAAA一定不为0，取！则为0。</span></span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">/* </span></span><br><span class="line"><span class="comment"> * negate - return -x </span></span><br><span class="line"><span class="comment"> * Example: negate(1) = -1.</span></span><br><span class="line"><span class="comment"> * Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</span></span><br><span class="line"><span class="comment"> * Max ops: 5</span></span><br><span class="line"><span class="comment"> * Rating: 2</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="type">int</span> <span class="title function_">negate</span><span class="params">(<span class="type">int</span> x)</span> <span class="comment">//求x的相反数,我们知道~x + x = -1</span></span><br><span class="line">   &#123;</span><br><span class="line">     <span class="keyword">return</span> (~x + <span class="number">1</span>);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">//3</span></span><br><span class="line">   <span class="comment">/* </span></span><br><span class="line"><span class="comment"> * isAsciiDigit - return 1 if 0x30 &lt;= x &lt;= 0x39 (ASCII codes for characters &#x27;0&#x27; to &#x27;9&#x27;)</span></span><br><span class="line"><span class="comment"> * Example: isAsciiDigit(0x35) = 1.</span></span><br><span class="line"><span class="comment"> * isAsciiDigit(0x3a) = 0.</span></span><br><span class="line"><span class="comment"> * isAsciiDigit(0x05) = 0.</span></span><br><span class="line"><span class="comment"> * Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</span></span><br><span class="line"><span class="comment"> * Max ops: 15</span></span><br><span class="line"><span class="comment"> * Rating: 3</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="type">int</span> <span class="title function_">isAsciiDigit</span><span class="params">(<span class="type">int</span> x)</span> <span class="comment">//计算输入值是否是数字 0-9 的 ASCII 值</span></span><br><span class="line">   &#123;</span><br><span class="line">     <span class="keyword">return</span> (!(x + ((~<span class="number">0x30</span>) + <span class="number">1</span>)) &gt;&gt; <span class="number">31</span>) &amp; ((x + ((~<span class="number">0x3a</span>) + <span class="number">1</span>)) &gt;&gt; <span class="number">31</span>);<span class="comment">//这个可以利用上面的求相反数来写，我们主要是拿x来与0~9的比较大小</span></span><br><span class="line">     <span class="comment">// ((~0x30) + 1))是求0x30的相反数，然后用x-0x30，再右移31位取符号位，如果符号位是1，则是负数。</span></span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">/* </span></span><br><span class="line"><span class="comment"> * conditional - same as x ? y : z </span></span><br><span class="line"><span class="comment"> * Example: conditional(2,4,5) = 4</span></span><br><span class="line"><span class="comment"> * Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</span></span><br><span class="line"><span class="comment"> * Max ops: 16</span></span><br><span class="line"><span class="comment"> * Rating: 3</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="type">int</span> <span class="title function_">conditional</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y, <span class="type">int</span> z)</span> <span class="comment">////x为0返回z;否则返回y</span></span><br><span class="line">   &#123;</span><br><span class="line">     <span class="type">int</span> mask;</span><br><span class="line">     mask = (!x + (~<span class="number">1</span>) + <span class="number">1</span>);</span><br><span class="line">     <span class="keyword">return</span> (mask &amp; y) | (~mask &amp; z);</span><br><span class="line">     <span class="comment">//mask=(!x + (~1) + 1)，求的是！x-1，要么等于0，要么等于-1，等于-1就可以用补码！</span></span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">/* </span></span><br><span class="line"><span class="comment"> * isLessOrEqual - if x &lt;= y  then return 1, else return 0 </span></span><br><span class="line"><span class="comment"> * Example: isLessOrEqual(4,5) = 1.</span></span><br><span class="line"><span class="comment"> * Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</span></span><br><span class="line"><span class="comment"> * Max ops: 24</span></span><br><span class="line"><span class="comment"> * Rating: 3</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="type">int</span> <span class="title function_">isLessOrEqual</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> <span class="comment">////x&lt;=y返回1，否则返回0</span></span><br><span class="line">   &#123;</span><br><span class="line">     <span class="type">int</span> negX = ~x + <span class="number">1</span>;<span class="comment">//求-x</span></span><br><span class="line">     <span class="type">int</span> addX = negX + y;<span class="comment">//y-x，要和0，1比</span></span><br><span class="line">     <span class="type">int</span> checksign = (addX &gt;&gt; <span class="number">31</span>) &amp;<span class="number">1</span>;<span class="comment">//看符号位</span></span><br><span class="line">     <span class="type">int</span> leftBit = <span class="number">1</span> &lt;&lt; <span class="number">31</span>;</span><br><span class="line">     <span class="type">int</span> xLeft = x &amp; leftBit;<span class="comment">//求x的符号</span></span><br><span class="line">     <span class="type">int</span> yLeft = y &amp; leftBit;<span class="comment">//求y的符号</span></span><br><span class="line">     <span class="type">int</span> bitXor = xLeft ^ yLeft;<span class="comment">//x和y符号相同标志位，相同为0不同为1</span></span><br><span class="line">     bitXor = (bitXor &gt;&gt; <span class="number">31</span>) &amp; <span class="number">1</span>;<span class="comment">//符号相同标志位格式化为0或1</span></span><br><span class="line">     <span class="keyword">return</span> ((!bitXor) &amp; (!checksign)) | (bitXor &amp; (xLeft &gt;&gt; <span class="number">31</span>)); <span class="comment">//返回1有两种情况：符号相同标志位为0（相同）位与 y-x 的符号为0（y-x&gt;=0）结果为1；符号相同标志位为1（不同）位与x的符号位为1（x&lt;0）</span></span><br><span class="line">   &#125;<span class="comment">//bitXor是判断x，y是否是同号。</span></span><br><span class="line">   <span class="comment">//4</span></span><br><span class="line">   <span class="comment">/* </span></span><br><span class="line"><span class="comment"> * logicalNeg - implement the ! operator, using all of </span></span><br><span class="line"><span class="comment"> * the legal operators except !</span></span><br><span class="line"><span class="comment"> * Examples: logicalNeg(3) = 0, logicalNeg(0) = 1</span></span><br><span class="line"><span class="comment"> * Legal ops: ~ &amp; ^ | + &lt;&lt; &gt;&gt;</span></span><br><span class="line"><span class="comment"> * Max ops: 12</span></span><br><span class="line"><span class="comment"> * Rating: 4 </span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="type">int</span> <span class="title function_">logicalNeg</span><span class="params">(<span class="type">int</span> x)</span>  <span class="comment">//不用!的条件下实现!运算</span></span><br><span class="line">   &#123;</span><br><span class="line">     <span class="keyword">return</span> ((~x &amp; ~(~x + <span class="number">1</span>)) &gt;&gt; <span class="number">31</span>) &amp; <span class="number">1</span>;<span class="comment">//(~x &amp; ~(~x + 1))这个当x=0这个值就是1，当x为最小值，这个为0，其他情况，x和-x符号不同，所以等于0.</span></span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">/* howManyBits - return the minimum number of bits required to represent x in</span></span><br><span class="line"><span class="comment"> * two&#x27;s complement</span></span><br><span class="line"><span class="comment"> * Examples: howManyBits(12) = 5</span></span><br><span class="line"><span class="comment"> * howManyBits(298) = 10</span></span><br><span class="line"><span class="comment"> * howManyBits(-5) = 4</span></span><br><span class="line"><span class="comment"> * howManyBits(0)  = 1</span></span><br><span class="line"><span class="comment"> * howManyBits(-1) = 1</span></span><br><span class="line"><span class="comment"> * howManyBits(0x80000000) = 32</span></span><br><span class="line"><span class="comment"> * Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;</span></span><br><span class="line"><span class="comment"> * Max ops: 90</span></span><br><span class="line"><span class="comment"> * Rating: 4</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">   <span class="type">int</span> <span class="title function_">howManyBits</span><span class="params">(<span class="type">int</span> x)</span> <span class="comment">//一个数用补码表示最少需要几位？*******</span></span><br><span class="line">   &#123;</span><br><span class="line">     <span class="type">int</span> b16,b8,b4,b2,b1,b0;</span><br><span class="line">     <span class="type">int</span> sign = x &gt;&gt; <span class="number">31</span>;</span><br><span class="line">     x = (sign &amp; ~x) | (~sign &amp; x);<span class="comment">//如果x为正则不变，否则按位取反（这样好找最高位为1的，原来是最高位为0的，这样也将符号位去掉了）</span></span><br><span class="line">     b16 = !!(x &gt;&gt; <span class="number">16</span>) &lt;&lt; <span class="number">4</span>;<span class="comment">//高十六位是否有1</span></span><br><span class="line">     x = x &gt;&gt; b16;          <span class="comment">//如果有（至少需要16位），则将原数右移16位</span></span><br><span class="line">     b8 = !!(x &gt;&gt; <span class="number">8</span>) &lt;&lt; <span class="number">3</span>;  <span class="comment">//剩余位高8位是否有1</span></span><br><span class="line">     x = x &gt;&gt; b8;           <span class="comment">//如果有（至少需要16+8=24位），则右移8位</span></span><br><span class="line">     b4 = !!(x &gt;&gt; <span class="number">4</span>) &lt;&lt; <span class="number">2</span>;</span><br><span class="line">     x = x &gt;&gt; b4;</span><br><span class="line">     b2 = !!(x &gt;&gt; <span class="number">2</span>) &lt;&lt; <span class="number">1</span>;</span><br><span class="line">     x = x &gt;&gt; b2;</span><br><span class="line">     b1 = !!(x &gt;&gt; <span class="number">1</span>);</span><br><span class="line">     x = x &gt;&gt; b1;</span><br><span class="line">     b0 = x;</span><br><span class="line">     <span class="keyword">return</span> b16 + b8 + b4 + b2 + b1 + b0 + <span class="number">1</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">//float</span></span><br><span class="line">   <span class="comment">/* </span></span><br><span class="line"><span class="comment"> * floatScale2 - Return bit-level equivalent of expression 2*f for</span></span><br><span class="line"><span class="comment"> * floating point argument f.</span></span><br><span class="line"><span class="comment"> * Both the argument and result are passed as unsigned int&#x27;s, but</span></span><br><span class="line"><span class="comment"> * they are to be interpreted as the bit-level representation of</span></span><br><span class="line"><span class="comment"> * single-precision floating point values.</span></span><br><span class="line"><span class="comment"> * When argument is NaN, return argument</span></span><br><span class="line"><span class="comment"> * Legal ops: Any integer/unsigned operations incl. ||, &amp;&amp;. also if, while</span></span><br><span class="line"><span class="comment"> * Max ops: 30</span></span><br><span class="line"><span class="comment"> * Rating: 4</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="type">unsigned</span> <span class="title function_">floatScale2</span><span class="params">(<span class="type">unsigned</span> uf)</span> <span class="comment">//求2乘一个浮点数 ******</span></span><br><span class="line">   &#123;</span><br><span class="line">     <span class="type">int</span> exp_ = (uf &amp; <span class="number">0x7f800000</span>) &gt;&gt; <span class="number">23</span>;</span><br><span class="line">     <span class="type">int</span> s_ = uf &amp; <span class="number">0x80000000</span>;</span><br><span class="line">     <span class="keyword">if</span> (exp_ == <span class="number">0</span>)</span><br><span class="line">   <span class="keyword">return</span> (uf &lt;&lt; <span class="number">1</span>) | s_;</span><br><span class="line">     <span class="keyword">if</span> (exp_ == <span class="number">255</span>)</span><br><span class="line">   <span class="keyword">return</span> uf;</span><br><span class="line">     ++exp_;</span><br><span class="line">     <span class="keyword">if</span> (exp_ == <span class="number">255</span>)</span><br><span class="line">   <span class="keyword">return</span> <span class="number">0x7f800000</span> | s_;</span><br><span class="line">     <span class="keyword">return</span> (uf &amp; <span class="number">0x807fffff</span>) | (exp_ &lt;&lt; <span class="number">23</span>);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">/* </span></span><br><span class="line"><span class="comment"> * floatFloat2Int - Return bit-level equivalent of expression (int) f</span></span><br><span class="line"><span class="comment"> * for floating point argument f.</span></span><br><span class="line"><span class="comment"> * Argument is passed as unsigned int, but</span></span><br><span class="line"><span class="comment"> * it is to be interpreted as the bit-level representation of a</span></span><br><span class="line"><span class="comment"> * single-precision floating point value.</span></span><br><span class="line"><span class="comment"> * Anything out of range (including NaN and infinity) should return</span></span><br><span class="line"><span class="comment"> * 0x80000000u.</span></span><br><span class="line"><span class="comment"> * Legal ops: Any integer/unsigned operations incl. ||, &amp;&amp;. also if, while</span></span><br><span class="line"><span class="comment"> * Max ops: 30</span></span><br><span class="line"><span class="comment"> * Rating: 4</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="type">int</span> <span class="title function_">floatFloat2Int</span><span class="params">(<span class="type">unsigned</span> uf)</span><span class="comment">//将浮点数转换为有符号整数，float_f2i</span></span><br><span class="line">   &#123;</span><br><span class="line">     <span class="type">int</span> s_ = uf &gt;&gt; <span class="number">31</span>;</span><br><span class="line">     <span class="type">int</span> exp_ = ((uf &amp; <span class="number">0x7f800000</span>) &gt;&gt; <span class="number">23</span>) - <span class="number">127</span>;</span><br><span class="line">     <span class="type">int</span> frac_ = (uf &amp; <span class="number">0x007fffff</span>) | <span class="number">0x00800000</span>;</span><br><span class="line">     <span class="keyword">if</span> (!(uf &amp; <span class="number">0x7fffffff</span>))</span><br><span class="line">   <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (exp_ &gt; <span class="number">31</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0x80000000</span>;</span><br><span class="line">  <span class="keyword">if</span> (exp_ &lt; <span class="number">0</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (exp_ &gt; <span class="number">23</span>)</span><br><span class="line">    frac_ &lt;&lt;= (exp_ - <span class="number">23</span>);</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    frac_ &gt;&gt;= (<span class="number">23</span> - exp_);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!((frac_ &gt;&gt; <span class="number">31</span>) ^ s_))</span><br><span class="line">    <span class="keyword">return</span> frac_;</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (frac_ &gt;&gt; <span class="number">31</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0x80000000</span>;</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    <span class="keyword">return</span> ~frac_ + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> * floatPower2 - Return bit-level equivalent of the expression 2.0^x</span></span><br><span class="line"><span class="comment"> * (2.0 raised to the power x) for any 32-bit integer x.</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment"> * The unsigned value that is returned should have the identical bit</span></span><br><span class="line"><span class="comment"> * representation as the single-precision floating-point number 2.0^x.</span></span><br><span class="line"><span class="comment"> * If the result is too small to be represented as a denorm, return</span></span><br><span class="line"><span class="comment"> * 0. If too large, return +INF.</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * Legal ops: Any integer/unsigned operations incl. ||, &amp;&amp;. Also if, while </span></span><br><span class="line"><span class="comment"> * Max ops: 30 </span></span><br><span class="line"><span class="comment"> * Rating: 4</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="type">unsigned</span> <span class="title function_">floatPower2</span><span class="params">(<span class="type">int</span> x)</span> <span class="comment">//计算浮点数2.0^x</span></span><br><span class="line">   &#123;</span><br><span class="line">     <span class="keyword">if</span> (x &lt; <span class="number">-127</span>)</span><br><span class="line">   <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">     <span class="keyword">if</span> (x &gt; <span class="number">128</span>)</span><br><span class="line">   <span class="keyword">return</span> <span class="number">0x7f800000</span>;</span><br><span class="line">     x += <span class="number">127</span>;</span><br><span class="line">     x = x &lt;&lt; <span class="number">23</span>;</span><br><span class="line">     <span class="keyword">return</span> x;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<h2 id="Bomb-Lab"><a href="#Bomb-Lab" class="headerlink" title="Bomb Lab"></a>Bomb Lab</h2><p>在gdb中进行反汇编调试，输入disas phase_1，出来第一关：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Dump of assembler code <span class="keyword">for</span> function phase_1:</span><br><span class="line">   <span class="number">0x0000000000400ee0</span> &lt;+<span class="number">0</span>&gt;:     sub    rsp,<span class="number">0x8</span><span class="comment">//开辟0x8的空间</span></span><br><span class="line">   <span class="number">0x0000000000400ee4</span> &lt;+<span class="number">4</span>&gt;:     mov    esi,<span class="number">0x402400</span><span class="comment">//将0x402400存到esi中，里面可能会有字符串</span></span><br><span class="line">   <span class="number">0x0000000000400ee9</span> &lt;+<span class="number">9</span>&gt;:     call   <span class="number">0x401338</span> &lt;strings_not_equal&gt;<span class="comment">//这个函数可能是对比函数</span></span><br><span class="line">   <span class="number">0x0000000000400eee</span> &lt;+<span class="number">14</span>&gt;:    test   eax,eax<span class="comment">//对比</span></span><br><span class="line">   <span class="number">0x0000000000400ef0</span> &lt;+<span class="number">16</span>&gt;:    je     <span class="number">0x400ef7</span> &lt;phase_1+<span class="number">23</span>&gt;<span class="comment">//如果eax=0，则进入phase2；否则爆炸</span></span><br><span class="line">   <span class="number">0x0000000000400ef2</span> &lt;+<span class="number">18</span>&gt;:    call   <span class="number">0x40143a</span> &lt;explode_bomb&gt;</span><br><span class="line">   <span class="number">0x0000000000400ef7</span> &lt;+<span class="number">23</span>&gt;:    add    rsp,<span class="number">0x8</span><span class="comment">//返回0x8大小的内存</span></span><br><span class="line">   <span class="number">0x0000000000400efb</span> &lt;+<span class="number">27</span>&gt;:    ret</span><br></pre></td></tr></table></figure>

<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-LAB/image-20220303172619689.png" alt="image-20220303172619689"></p>
<p>用ida看的话更清楚，就是一个对比函数：</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-LAB/image-20220303172745254.png" alt="image-20220303172745254"></p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-LAB/image-20220303172937753.png" alt="image-20220303172937753"></p>
<p>拿下！</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">Dump of assembler code <span class="keyword">for</span> function phase_2:</span><br><span class="line">   <span class="number">0x0000000000400efc</span> &lt;+<span class="number">0</span>&gt;:     push   rbp</span><br><span class="line">   <span class="number">0x0000000000400efd</span> &lt;+<span class="number">1</span>&gt;:     push   rbx</span><br><span class="line">   <span class="number">0x0000000000400efe</span> &lt;+<span class="number">2</span>&gt;:     sub    rsp,<span class="number">0x28</span><span class="comment">//开辟0x28空间</span></span><br><span class="line">   <span class="number">0x0000000000400f02</span> &lt;+<span class="number">6</span>&gt;:     mov    rsi,rsp</span><br><span class="line">   <span class="number">0x0000000000400f05</span> &lt;+<span class="number">9</span>&gt;:     call   <span class="number">0x40145c</span> &lt;read_six_numbers&gt;<span class="comment">//输入6个数</span></span><br><span class="line">   <span class="number">0x0000000000400f0a</span> &lt;+<span class="number">14</span>&gt;:    cmp    DWORD PTR [rsp],<span class="number">0x1</span><span class="comment">//与1对比</span></span><br><span class="line">   <span class="number">0x0000000000400f0e</span> &lt;+<span class="number">18</span>&gt;:    je     <span class="number">0x400f30</span> &lt;phase_2+<span class="number">52</span>&gt;</span><br><span class="line">   <span class="number">0x0000000000400f10</span> &lt;+<span class="number">20</span>&gt;:    call   <span class="number">0x40143a</span> &lt;explode_bomb&gt;</span><br><span class="line">   <span class="number">0x0000000000400f15</span> &lt;+<span class="number">25</span>&gt;:    jmp    <span class="number">0x400f30</span> &lt;phase_2+<span class="number">52</span>&gt;<span class="comment">//跳转到phase3</span></span><br><span class="line">   <span class="number">0x0000000000400f17</span> &lt;+<span class="number">27</span>&gt;:    mov    eax,DWORD PTR [rbx<span class="number">-0x4</span>]</span><br><span class="line">   <span class="number">0x0000000000400f1a</span> &lt;+<span class="number">30</span>&gt;:    add    eax,eax<span class="comment">//eax += eax</span></span><br><span class="line">   <span class="number">0x0000000000400f1c</span> &lt;+<span class="number">32</span>&gt;:    cmp    DWORD PTR [rbx],eax</span><br><span class="line">   <span class="number">0x0000000000400f1e</span> &lt;+<span class="number">34</span>&gt;:    je     <span class="number">0x400f25</span> &lt;phase_2+<span class="number">41</span>&gt;</span><br><span class="line">   <span class="number">0x0000000000400f20</span> &lt;+<span class="number">36</span>&gt;:    call   <span class="number">0x40143a</span> &lt;explode_bomb&gt;</span><br><span class="line">   <span class="number">0x0000000000400f25</span> &lt;+<span class="number">41</span>&gt;:    add    rbx,<span class="number">0x4</span><span class="comment">//rbx+4这个地址在循环</span></span><br><span class="line">   <span class="number">0x0000000000400f29</span> &lt;+<span class="number">45</span>&gt;:    cmp    rbx,rbp<span class="comment">//对比rbx。rbp</span></span><br><span class="line">   <span class="number">0x0000000000400f2c</span> &lt;+<span class="number">48</span>&gt;:    jne    <span class="number">0x400f17</span> &lt;phase_2+<span class="number">27</span>&gt;<span class="comment">//进入循环</span></span><br><span class="line">   <span class="number">0x0000000000400f2e</span> &lt;+<span class="number">50</span>&gt;:    jmp    <span class="number">0x400f3c</span> &lt;phase_2+<span class="number">64</span>&gt;</span><br><span class="line">   <span class="number">0x0000000000400f30</span> &lt;+<span class="number">52</span>&gt;:    lea    rbx,[rsp+<span class="number">0x4</span>]</span><br><span class="line">   <span class="number">0x0000000000400f35</span> &lt;+<span class="number">57</span>&gt;:    lea    rbp,[rsp+<span class="number">0x18</span>]</span><br><span class="line">   <span class="number">0x0000000000400f3a</span> &lt;+<span class="number">62</span>&gt;:    jmp    <span class="number">0x400f17</span> &lt;phase_2+<span class="number">27</span>&gt;</span><br><span class="line">   <span class="number">0x0000000000400f3c</span> &lt;+<span class="number">64</span>&gt;:    add    rsp,<span class="number">0x28</span></span><br><span class="line">   <span class="number">0x0000000000400f40</span> &lt;+<span class="number">68</span>&gt;:    pop    rbx</span><br><span class="line">   <span class="number">0x0000000000400f41</span> &lt;+<span class="number">69</span>&gt;:    pop    rbp</span><br><span class="line">   <span class="number">0x0000000000400f42</span> &lt;+<span class="number">70</span>&gt;:    ret</span><br><span class="line">End of assembler dump.</span><br></pre></td></tr></table></figure>

<p>那么很清楚了，我们这个循环做的操作就是让eax*2，那么找到第一个值就行了，我们用ida反编译</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-LAB/image-20220303181512313.png" alt="image-20220303181512313"></p>
<p>所以6个数是1，2，4，8，16，32</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-LAB/image-20220303181600058.png" alt="image-20220303181600058"></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">Dump of assembler code <span class="keyword">for</span> function phase_3:</span><br><span class="line">   <span class="number">0x0000000000400f43</span> &lt;+<span class="number">0</span>&gt;:     sub    rsp,<span class="number">0x18</span><span class="comment">//开辟0x18空间</span></span><br><span class="line">   <span class="number">0x0000000000400f47</span> &lt;+<span class="number">4</span>&gt;:     lea    rcx,[rsp+<span class="number">0xc</span>]<span class="comment">//将[rsp+0xc]的值存在rcx寄存器</span></span><br><span class="line">   <span class="number">0x0000000000400f4c</span> &lt;+<span class="number">9</span>&gt;:     lea    rdx,[rsp+<span class="number">0x8</span>]</span><br><span class="line">   <span class="number">0x0000000000400f51</span> &lt;+<span class="number">14</span>&gt;:    mov    esi,<span class="number">0x4025cf</span><span class="comment">//esi寄存器的值为0x4025cf</span></span><br><span class="line">   <span class="number">0x0000000000400f56</span> &lt;+<span class="number">19</span>&gt;:    mov    eax,<span class="number">0x0</span></span><br><span class="line">   <span class="number">0x0000000000400f5b</span> &lt;+<span class="number">24</span>&gt;:    call   <span class="number">0x400bf0</span> &lt;__isoc99_sscanf@plt&gt;<span class="comment">//scanf</span></span><br><span class="line">   <span class="number">0x0000000000400f60</span> &lt;+<span class="number">29</span>&gt;:    cmp    eax,<span class="number">0x1</span></span><br><span class="line">   <span class="number">0x0000000000400f63</span> &lt;+<span class="number">32</span>&gt;:    jg     <span class="number">0x400f6a</span> &lt;phase_3+<span class="number">39</span>&gt;</span><br><span class="line">   <span class="number">0x0000000000400f65</span> &lt;+<span class="number">34</span>&gt;:    call   <span class="number">0x40143a</span> &lt;explode_bomb&gt;</span><br><span class="line">   <span class="number">0x0000000000400f6a</span> &lt;+<span class="number">39</span>&gt;:    cmp    DWORD PTR [rsp+<span class="number">0x8</span>],<span class="number">0x7</span></span><br><span class="line">   <span class="number">0x0000000000400f6f</span> &lt;+<span class="number">44</span>&gt;:    ja     <span class="number">0x400fad</span> &lt;phase_3+<span class="number">106</span>&gt;</span><br><span class="line">   <span class="number">0x0000000000400f71</span> &lt;+<span class="number">46</span>&gt;:    mov    eax,DWORD PTR [rsp+<span class="number">0x8</span>]</span><br><span class="line">   <span class="number">0x0000000000400f75</span> &lt;+<span class="number">50</span>&gt;:    jmp    QWORD PTR [rax*<span class="number">8</span>+<span class="number">0x402470</span>]</span><br><span class="line">   <span class="number">0x0000000000400f7c</span> &lt;+<span class="number">57</span>&gt;:    mov    eax,<span class="number">0xcf</span></span><br><span class="line">   <span class="number">0x0000000000400f81</span> &lt;+<span class="number">62</span>&gt;:    jmp    <span class="number">0x400fbe</span> &lt;phase_3+<span class="number">123</span>&gt;</span><br><span class="line">   <span class="number">0x0000000000400f83</span> &lt;+<span class="number">64</span>&gt;:    mov    eax,<span class="number">0x2c3</span></span><br><span class="line">   <span class="number">0x0000000000400f88</span> &lt;+<span class="number">69</span>&gt;:    jmp    <span class="number">0x400fbe</span> &lt;phase_3+<span class="number">123</span>&gt;</span><br><span class="line">   <span class="number">0x0000000000400f8a</span> &lt;+<span class="number">71</span>&gt;:    mov    eax,<span class="number">0x100</span></span><br><span class="line">   <span class="number">0x0000000000400f8f</span> &lt;+<span class="number">76</span>&gt;:    jmp    <span class="number">0x400fbe</span> &lt;phase_3+<span class="number">123</span>&gt;</span><br><span class="line">   <span class="number">0x0000000000400f91</span> &lt;+<span class="number">78</span>&gt;:    mov    eax,<span class="number">0x185</span></span><br><span class="line">   <span class="number">0x0000000000400f96</span> &lt;+<span class="number">83</span>&gt;:    jmp    <span class="number">0x400fbe</span> &lt;phase_3+<span class="number">123</span>&gt;</span><br><span class="line">   <span class="number">0x0000000000400f98</span> &lt;+<span class="number">85</span>&gt;:    mov    eax,<span class="number">0xce</span></span><br><span class="line">   <span class="number">0x0000000000400f9d</span> &lt;+<span class="number">90</span>&gt;:    jmp    <span class="number">0x400fbe</span> &lt;phase_3+<span class="number">123</span>&gt;</span><br><span class="line">   <span class="number">0x0000000000400f9f</span> &lt;+<span class="number">92</span>&gt;:    mov    eax,<span class="number">0x2aa</span></span><br><span class="line">   <span class="number">0x0000000000400fa4</span> &lt;+<span class="number">97</span>&gt;:    jmp    <span class="number">0x400fbe</span> &lt;phase_3+<span class="number">123</span>&gt;</span><br><span class="line">   <span class="number">0x0000000000400fa6</span> &lt;+<span class="number">99</span>&gt;:    mov    eax,<span class="number">0x147</span></span><br><span class="line">   <span class="number">0x0000000000400fab</span> &lt;+<span class="number">104</span>&gt;:   jmp    <span class="number">0x400fbe</span> &lt;phase_3+<span class="number">123</span>&gt;</span><br><span class="line">   <span class="number">0x0000000000400fad</span> &lt;+<span class="number">106</span>&gt;:   call   <span class="number">0x40143a</span> &lt;explode_bomb&gt;</span><br><span class="line">   <span class="number">0x0000000000400fb2</span> &lt;+<span class="number">111</span>&gt;:   mov    eax,<span class="number">0x0</span></span><br><span class="line">   <span class="number">0x0000000000400fb7</span> &lt;+<span class="number">116</span>&gt;:   jmp    <span class="number">0x400fbe</span> &lt;phase_3+<span class="number">123</span>&gt;</span><br><span class="line">   <span class="number">0x0000000000400fb9</span> &lt;+<span class="number">118</span>&gt;:   mov    eax,<span class="number">0x137</span></span><br><span class="line">   <span class="number">0x0000000000400fbe</span> &lt;+<span class="number">123</span>&gt;:   cmp    eax,DWORD PTR [rsp+<span class="number">0xc</span>]</span><br><span class="line">   <span class="number">0x0000000000400fc2</span> &lt;+<span class="number">127</span>&gt;:   je     <span class="number">0x400fc9</span> &lt;phase_3+<span class="number">134</span>&gt;</span><br><span class="line">   <span class="number">0x0000000000400fc4</span> &lt;+<span class="number">129</span>&gt;:   call   <span class="number">0x40143a</span> &lt;explode_bomb&gt;</span><br><span class="line">   <span class="number">0x0000000000400fc9</span> &lt;+<span class="number">134</span>&gt;:   add    rsp,<span class="number">0x18</span></span><br><span class="line">   <span class="number">0x0000000000400fcd</span> &lt;+<span class="number">138</span>&gt;:   ret</span><br><span class="line">End of assembler dump.</span><br></pre></td></tr></table></figure>

<p>我认为这个不太好看出来，下面是关键</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0x0000000000400f6a</span> &lt;+<span class="number">39</span>&gt;:    cmp    DWORD PTR [rsp+<span class="number">0x8</span>],<span class="number">0x7</span></span><br><span class="line"> <span class="number">0x0000000000400f6f</span> &lt;+<span class="number">44</span>&gt;:    ja     <span class="number">0x400fad</span> &lt;phase_3+<span class="number">106</span>&gt;</span><br></pre></td></tr></table></figure>

<p>ja是大于则跳转，跳转就爆炸了，所以不能大于7，给了我们许多选择，我们选0-7都行，第二个数就对应switch上的另一个值，用ida更好看出！</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-LAB/image-20220303185344874.png" alt="image-20220303185344874"></p>
<p>我选2，就必须对应707。</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-LAB/image-20220303185414142.png" alt="image-20220303185414142"></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">Dump of assembler code <span class="keyword">for</span> function phase_4:</span><br><span class="line">   <span class="number">0x000000000040100c</span> &lt;+<span class="number">0</span>&gt;:     sub    rsp,<span class="number">0x18</span><span class="comment">//开辟空间</span></span><br><span class="line">   <span class="number">0x0000000000401010</span> &lt;+<span class="number">4</span>&gt;:     lea    rcx,[rsp+<span class="number">0xc</span>]</span><br><span class="line">   <span class="number">0x0000000000401015</span> &lt;+<span class="number">9</span>&gt;:     lea    rdx,[rsp+<span class="number">0x8</span>]</span><br><span class="line">   <span class="number">0x000000000040101a</span> &lt;+<span class="number">14</span>&gt;:    mov    esi,<span class="number">0x4025cf</span></span><br><span class="line">   <span class="number">0x000000000040101f</span> &lt;+<span class="number">19</span>&gt;:    mov    eax,<span class="number">0x0</span></span><br><span class="line">   <span class="number">0x0000000000401024</span> &lt;+<span class="number">24</span>&gt;:    call   <span class="number">0x400bf0</span> &lt;__isoc99_sscanf@plt&gt;<span class="comment">//输入两个值</span></span><br><span class="line">   <span class="number">0x0000000000401029</span> &lt;+<span class="number">29</span>&gt;:    cmp    eax,<span class="number">0x2</span></span><br><span class="line">   <span class="number">0x000000000040102c</span> &lt;+<span class="number">32</span>&gt;:    jne    <span class="number">0x401035</span> &lt;phase_4+<span class="number">41</span>&gt;</span><br><span class="line">   <span class="number">0x000000000040102e</span> &lt;+<span class="number">34</span>&gt;:    cmp    DWORD PTR [rsp+<span class="number">0x8</span>],<span class="number">0xe</span></span><br><span class="line">   <span class="number">0x0000000000401033</span> &lt;+<span class="number">39</span>&gt;:    jbe    <span class="number">0x40103a</span> &lt;phase_4+<span class="number">46</span>&gt;</span><br><span class="line">   <span class="number">0x0000000000401035</span> &lt;+<span class="number">41</span>&gt;:    call   <span class="number">0x40143a</span> &lt;explode_bomb&gt;</span><br><span class="line">   <span class="number">0x000000000040103a</span> &lt;+<span class="number">46</span>&gt;:    mov    edx,<span class="number">0xe</span></span><br><span class="line">   <span class="number">0x000000000040103f</span> &lt;+<span class="number">51</span>&gt;:    mov    esi,<span class="number">0x0</span></span><br><span class="line">   <span class="number">0x0000000000401044</span> &lt;+<span class="number">56</span>&gt;:    mov    edi,DWORD PTR [rsp+<span class="number">0x8</span>]</span><br><span class="line">   <span class="number">0x0000000000401048</span> &lt;+<span class="number">60</span>&gt;:    call   <span class="number">0x400fce</span> &lt;func4&gt;</span><br><span class="line">   <span class="number">0x000000000040104d</span> &lt;+<span class="number">65</span>&gt;:    test   eax,eax</span><br><span class="line">   <span class="number">0x000000000040104f</span> &lt;+<span class="number">67</span>&gt;:    jne    <span class="number">0x401058</span> &lt;phase_4+<span class="number">76</span>&gt;</span><br><span class="line">   <span class="number">0x0000000000401051</span> &lt;+<span class="number">69</span>&gt;:    cmp    DWORD PTR [rsp+<span class="number">0xc</span>],<span class="number">0x0</span></span><br><span class="line">   <span class="number">0x0000000000401056</span> &lt;+<span class="number">74</span>&gt;:    je     <span class="number">0x40105d</span> &lt;phase_4+<span class="number">81</span>&gt;</span><br><span class="line">   <span class="number">0x0000000000401058</span> &lt;+<span class="number">76</span>&gt;:    call   <span class="number">0x40143a</span> &lt;explode_bomb&gt;</span><br><span class="line">   <span class="number">0x000000000040105d</span> &lt;+<span class="number">81</span>&gt;:    add    rsp,<span class="number">0x18</span></span><br><span class="line">   <span class="number">0x0000000000401061</span> &lt;+<span class="number">85</span>&gt;:    ret</span><br><span class="line">End of assembler dump.</span><br></pre></td></tr></table></figure>

<p>jbe小于等于则跳转，所以eax要≤ 14，第一个参数要≤ 14</p>
<p>接下来第二个参数要看func4</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">Dump of assembler code <span class="keyword">for</span> function func4:</span><br><span class="line">   <span class="number">0x0000000000400fce</span> &lt;+<span class="number">0</span>&gt;:     sub    rsp,<span class="number">0x8</span></span><br><span class="line">   <span class="number">0x0000000000400fd2</span> &lt;+<span class="number">4</span>&gt;:     mov    eax,edx</span><br><span class="line">   <span class="number">0x0000000000400fd4</span> &lt;+<span class="number">6</span>&gt;:     sub    eax,esi</span><br><span class="line">   <span class="number">0x0000000000400fd6</span> &lt;+<span class="number">8</span>&gt;:     mov    ecx,eax</span><br><span class="line">   <span class="number">0x0000000000400fd8</span> &lt;+<span class="number">10</span>&gt;:    shr    ecx,<span class="number">0x1f</span></span><br><span class="line">   <span class="number">0x0000000000400fdb</span> &lt;+<span class="number">13</span>&gt;:    add    eax,ecx</span><br><span class="line">   <span class="number">0x0000000000400fdd</span> &lt;+<span class="number">15</span>&gt;:    sar    eax,<span class="number">1</span></span><br><span class="line">   <span class="number">0x0000000000400fdf</span> &lt;+<span class="number">17</span>&gt;:    lea    ecx,[rax+rsi*<span class="number">1</span>]</span><br><span class="line">   <span class="number">0x0000000000400fe2</span> &lt;+<span class="number">20</span>&gt;:    cmp    ecx,edi</span><br><span class="line">   <span class="number">0x0000000000400fe4</span> &lt;+<span class="number">22</span>&gt;:    jle    <span class="number">0x400ff2</span> &lt;func4+<span class="number">36</span>&gt;</span><br><span class="line">   <span class="number">0x0000000000400fe6</span> &lt;+<span class="number">24</span>&gt;:    lea    edx,[rcx<span class="number">-0x1</span>]</span><br><span class="line">   <span class="number">0x0000000000400fe9</span> &lt;+<span class="number">27</span>&gt;:    call   <span class="number">0x400fce</span> &lt;func4&gt;</span><br><span class="line">   <span class="number">0x0000000000400fee</span> &lt;+<span class="number">32</span>&gt;:    add    eax,eax</span><br><span class="line">   <span class="number">0x0000000000400ff0</span> &lt;+<span class="number">34</span>&gt;:    jmp    <span class="number">0x401007</span> &lt;func4+<span class="number">57</span>&gt;</span><br><span class="line">   <span class="number">0x0000000000400ff2</span> &lt;+<span class="number">36</span>&gt;:    mov    eax,<span class="number">0x0</span></span><br><span class="line">   <span class="number">0x0000000000400ff7</span> &lt;+<span class="number">41</span>&gt;:    cmp    ecx,edi</span><br><span class="line">   <span class="number">0x0000000000400ff9</span> &lt;+<span class="number">43</span>&gt;:    jge    <span class="number">0x401007</span> &lt;func4+<span class="number">57</span>&gt;</span><br><span class="line">   <span class="number">0x0000000000400ffb</span> &lt;+<span class="number">45</span>&gt;:    lea    esi,[rcx+<span class="number">0x1</span>]</span><br><span class="line">   <span class="number">0x0000000000400ffe</span> &lt;+<span class="number">48</span>&gt;:    call   <span class="number">0x400fce</span> &lt;func4&gt;</span><br><span class="line">   <span class="number">0x0000000000401003</span> &lt;+<span class="number">53</span>&gt;:    lea    eax,[rax+rax*<span class="number">1</span>+<span class="number">0x1</span>]</span><br><span class="line">   <span class="number">0x0000000000401007</span> &lt;+<span class="number">57</span>&gt;:    add    rsp,<span class="number">0x8</span></span><br><span class="line">   <span class="number">0x000000000040100b</span> &lt;+<span class="number">61</span>&gt;:    ret</span><br><span class="line">End of assembler dump.</span><br></pre></td></tr></table></figure>

<p>func4()函数的返回值(保存在寄存器eax中), 如果eax不是0的话, 则会跳转到引爆炸弹的地方. 因此函数func4()返回值eax必须是0</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-LAB/image-20220303194719642.png" alt="image-20220303194719642"></p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-LAB/image-20220303194725447.png" alt="image-20220303194725447"></p>
<p>很明显，在我们选择第二个参数时，我们如果让第二个参数&#x3D;0，那么这些问题顺利解决，因为在func4函数中没有v3&#x3D;&#x3D;0这个选项，当a1&#x3D;7，a2&#x3D;0时非常完美的做到了上述一切。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">Dump of assembler code <span class="keyword">for</span> function phase_5:</span><br><span class="line">   <span class="number">0x0000000000401062</span> &lt;+<span class="number">0</span>&gt;:     push   rbx</span><br><span class="line">   <span class="number">0x0000000000401063</span> &lt;+<span class="number">1</span>&gt;:     sub    rsp,<span class="number">0x20</span></span><br><span class="line">   <span class="number">0x0000000000401067</span> &lt;+<span class="number">5</span>&gt;:     mov    rbx,rdi</span><br><span class="line">   <span class="number">0x000000000040106a</span> &lt;+<span class="number">8</span>&gt;:     mov    rax,QWORD PTR fs:<span class="number">0x28</span></span><br><span class="line">   <span class="number">0x0000000000401073</span> &lt;+<span class="number">17</span>&gt;:    mov    QWORD PTR [rsp+<span class="number">0x18</span>],rax</span><br><span class="line">   <span class="number">0x0000000000401078</span> &lt;+<span class="number">22</span>&gt;:    xor    eax,eax</span><br><span class="line">   <span class="number">0x000000000040107a</span> &lt;+<span class="number">24</span>&gt;:    call   <span class="number">0x40131b</span> &lt;string_length&gt;</span><br><span class="line">   <span class="number">0x000000000040107f</span> &lt;+<span class="number">29</span>&gt;:    cmp    eax,<span class="number">0x6</span><span class="comment">//flag长度为6</span></span><br><span class="line">   <span class="number">0x0000000000401082</span> &lt;+<span class="number">32</span>&gt;:    je     <span class="number">0x4010d2</span> &lt;phase_5+<span class="number">112</span>&gt;</span><br><span class="line">   <span class="number">0x0000000000401084</span> &lt;+<span class="number">34</span>&gt;:    call   <span class="number">0x40143a</span> &lt;explode_bomb&gt;</span><br><span class="line">   <span class="number">0x0000000000401089</span> &lt;+<span class="number">39</span>&gt;:    jmp    <span class="number">0x4010d2</span> &lt;phase_5+<span class="number">112</span>&gt;</span><br><span class="line">   <span class="number">0x000000000040108b</span> &lt;+<span class="number">41</span>&gt;:    movzx  ecx,BYTE PTR [rbx+rax*<span class="number">1</span>]</span><br><span class="line">   <span class="number">0x000000000040108f</span> &lt;+<span class="number">45</span>&gt;:    mov    BYTE PTR [rsp],cl</span><br><span class="line">   <span class="number">0x0000000000401092</span> &lt;+<span class="number">48</span>&gt;:    mov    rdx,QWORD PTR [rsp]</span><br><span class="line">   <span class="number">0x0000000000401096</span> &lt;+<span class="number">52</span>&gt;:    and    edx,<span class="number">0xf</span></span><br><span class="line">   <span class="number">0x0000000000401099</span> &lt;+<span class="number">55</span>&gt;:    movzx  edx,BYTE PTR [rdx+<span class="number">0x4024b0</span>]</span><br><span class="line">   <span class="number">0x00000000004010a0</span> &lt;+<span class="number">62</span>&gt;:    mov    BYTE PTR [rsp+rax*<span class="number">1</span>+<span class="number">0x10</span>],dl</span><br><span class="line">   <span class="number">0x00000000004010a4</span> &lt;+<span class="number">66</span>&gt;:    add    rax,<span class="number">0x1</span></span><br><span class="line">   <span class="number">0x00000000004010a8</span> &lt;+<span class="number">70</span>&gt;:    cmp    rax,<span class="number">0x6</span></span><br><span class="line">   <span class="number">0x00000000004010ac</span> &lt;+<span class="number">74</span>&gt;:    jne    <span class="number">0x40108b</span> &lt;phase_5+<span class="number">41</span>&gt;</span><br><span class="line">   <span class="number">0x00000000004010ae</span> &lt;+<span class="number">76</span>&gt;:    mov    BYTE PTR [rsp+<span class="number">0x16</span>],<span class="number">0x0</span></span><br><span class="line">   <span class="number">0x00000000004010b3</span> &lt;+<span class="number">81</span>&gt;:    mov    esi,<span class="number">0x40245e</span></span><br><span class="line">   <span class="number">0x00000000004010b8</span> &lt;+<span class="number">86</span>&gt;:    lea    rdi,[rsp+<span class="number">0x10</span>]</span><br><span class="line">   <span class="number">0x00000000004010bd</span> &lt;+<span class="number">91</span>&gt;:    call   <span class="number">0x401338</span> &lt;strings_not_equal&gt;</span><br><span class="line">   <span class="number">0x00000000004010c2</span> &lt;+<span class="number">96</span>&gt;:    test   eax,eax</span><br><span class="line">   <span class="number">0x00000000004010c4</span> &lt;+<span class="number">98</span>&gt;:    je     <span class="number">0x4010d9</span> &lt;phase_5+<span class="number">119</span>&gt;</span><br><span class="line">   <span class="number">0x00000000004010c6</span> &lt;+<span class="number">100</span>&gt;:   call   <span class="number">0x40143a</span> &lt;explode_bomb&gt;</span><br><span class="line">   <span class="number">0x00000000004010cb</span> &lt;+<span class="number">105</span>&gt;:   nop    DWORD PTR [rax+rax*<span class="number">1</span>+<span class="number">0x0</span>]</span><br><span class="line">   <span class="number">0x00000000004010d0</span> &lt;+<span class="number">110</span>&gt;:   jmp    <span class="number">0x4010d9</span> &lt;phase_5+<span class="number">119</span>&gt;</span><br><span class="line">   <span class="number">0x00000000004010d2</span> &lt;+<span class="number">112</span>&gt;:   mov    eax,<span class="number">0x0</span></span><br><span class="line">   <span class="number">0x00000000004010d7</span> &lt;+<span class="number">117</span>&gt;:   jmp    <span class="number">0x40108b</span> &lt;phase_5+<span class="number">41</span>&gt;</span><br><span class="line">   <span class="number">0x00000000004010d9</span> &lt;+<span class="number">119</span>&gt;:   mov    rax,QWORD PTR [rsp+<span class="number">0x18</span>]</span><br><span class="line">   <span class="number">0x00000000004010de</span> &lt;+<span class="number">124</span>&gt;:   xor    rax,QWORD PTR fs:<span class="number">0x28</span></span><br><span class="line">   <span class="number">0x00000000004010e7</span> &lt;+<span class="number">133</span>&gt;:   je     <span class="number">0x4010ee</span> &lt;phase_5+<span class="number">140</span>&gt;</span><br><span class="line">   <span class="number">0x00000000004010e9</span> &lt;+<span class="number">135</span>&gt;:   call   <span class="number">0x400b30</span> &lt;__stack_chk_fail@plt&gt;</span><br><span class="line">   <span class="number">0x00000000004010ee</span> &lt;+<span class="number">140</span>&gt;:   add    rsp,<span class="number">0x20</span></span><br><span class="line">   <span class="number">0x00000000004010f2</span> &lt;+<span class="number">144</span>&gt;:   pop    rbx</span><br><span class="line">   <span class="number">0x00000000004010f3</span> &lt;+<span class="number">145</span>&gt;:   ret</span><br><span class="line">End of assembler dump.</span><br></pre></td></tr></table></figure>

<p>属实不想看汇编了，直接ida搞了。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">unsigned</span> __int64 __fastcall <span class="title function_">phase_5</span><span class="params">(__int64 a1)</span></span><br><span class="line">&#123;</span><br><span class="line">  __int64 i; <span class="comment">// rax</span></span><br><span class="line">  <span class="type">char</span> v3[<span class="number">8</span>]; <span class="comment">// [rsp+10h] [rbp-18h] BYREF</span></span><br><span class="line">  <span class="type">unsigned</span> __int64 v4; <span class="comment">// [rsp+18h] [rbp-10h]</span></span><br><span class="line"></span><br><span class="line">  v4 = __readfsqword(<span class="number">0x28</span>u);</span><br><span class="line">  <span class="keyword">if</span> ( (<span class="type">unsigned</span> <span class="type">int</span>)string_length(a1) != <span class="number">6</span> )</span><br><span class="line">    explode_bomb();</span><br><span class="line">  <span class="keyword">for</span> ( i = <span class="number">0LL</span>; i != <span class="number">6</span>; ++i )</span><br><span class="line">    v3[i] = array_3449[*(_BYTE *)(a1 + i) &amp; <span class="number">0xF</span>];</span><br><span class="line">  v3[<span class="number">6</span>] = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">if</span> ( (<span class="type">unsigned</span> <span class="type">int</span>)strings_not_equal(v3, <span class="string">&quot;flyers&quot;</span>) )</span><br><span class="line">    explode_bomb();</span><br><span class="line">  <span class="keyword">return</span> __readfsqword(<span class="number">0x28</span>u) ^ v4;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>也就爆破一下就行了</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">flag = <span class="string">&quot;&quot;</span></span><br><span class="line">a = <span class="string">&quot;maduiersnfotvbyl&quot;</span></span><br><span class="line">b = <span class="string">&quot;flyers&quot;</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">6</span>):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">65</span>,<span class="number">127</span>):</span><br><span class="line">        c = <span class="built_in">ord</span>(a[(j) &amp; <span class="number">0xf</span>])</span><br><span class="line">        <span class="keyword">if</span> c == <span class="built_in">ord</span>(b[i]):</span><br><span class="line">            flag += <span class="built_in">chr</span>(j)</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line"><span class="built_in">print</span>(flag)</span><br><span class="line"><span class="comment">#IONEFG</span></span><br></pre></td></tr></table></figure>

<p>成功！最后一关！</p>
<p>​	</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line">Dump of assembler code <span class="keyword">for</span> function phase_6:</span><br><span class="line">   <span class="number">0x00000000004010f4</span> &lt;+<span class="number">0</span>&gt;:     push   r14</span><br><span class="line">   <span class="number">0x00000000004010f6</span> &lt;+<span class="number">2</span>&gt;:     push   r13</span><br><span class="line">   <span class="number">0x00000000004010f8</span> &lt;+<span class="number">4</span>&gt;:     push   r12</span><br><span class="line">   <span class="number">0x00000000004010fa</span> &lt;+<span class="number">6</span>&gt;:     push   rbp</span><br><span class="line">   <span class="number">0x00000000004010fb</span> &lt;+<span class="number">7</span>&gt;:     push   rbx</span><br><span class="line">   <span class="number">0x00000000004010fc</span> &lt;+<span class="number">8</span>&gt;:     sub    rsp,<span class="number">0x50</span></span><br><span class="line">   <span class="number">0x0000000000401100</span> &lt;+<span class="number">12</span>&gt;:    mov    r13,rsp</span><br><span class="line">   <span class="number">0x0000000000401103</span> &lt;+<span class="number">15</span>&gt;:    mov    rsi,rsp</span><br><span class="line">   <span class="number">0x0000000000401106</span> &lt;+<span class="number">18</span>&gt;:    call   <span class="number">0x40145c</span> &lt;read_six_numbers&gt;<span class="comment">//读入6个数字</span></span><br><span class="line">   <span class="number">0x000000000040110b</span> &lt;+<span class="number">23</span>&gt;:    mov    r14,rsp</span><br><span class="line">   <span class="number">0x000000000040110e</span> &lt;+<span class="number">26</span>&gt;:    mov    r12d,<span class="number">0x0</span></span><br><span class="line">   <span class="number">0x0000000000401114</span> &lt;+<span class="number">32</span>&gt;:    mov    rbp,r13<span class="comment">//rsp赋值给rbp</span></span><br><span class="line">   <span class="number">0x0000000000401117</span> &lt;+<span class="number">35</span>&gt;:    mov    eax,DWORD PTR [r13+<span class="number">0x0</span>]<span class="comment">//取第一个参数</span></span><br><span class="line">   <span class="number">0x000000000040111b</span> &lt;+<span class="number">39</span>&gt;:    sub    eax,<span class="number">0x1</span><span class="comment">//参数1-1</span></span><br><span class="line">   <span class="number">0x000000000040111e</span> &lt;+<span class="number">42</span>&gt;:    cmp    eax,<span class="number">0x5</span><span class="comment">//参数1-1 =&lt; 5，所以参数一小于6</span></span><br><span class="line">   <span class="number">0x0000000000401121</span> &lt;+<span class="number">45</span>&gt;:    jbe    <span class="number">0x401128</span> &lt;phase_6+<span class="number">52</span>&gt;</span><br><span class="line">   <span class="number">0x0000000000401123</span> &lt;+<span class="number">47</span>&gt;:    call   <span class="number">0x40143a</span> &lt;explode_bomb&gt;</span><br><span class="line">   <span class="number">0x0000000000401128</span> &lt;+<span class="number">52</span>&gt;:    add    r12d,<span class="number">0x1</span><span class="comment">//r12控制循环次数</span></span><br><span class="line">   <span class="number">0x000000000040112c</span> &lt;+<span class="number">56</span>&gt;:    cmp    r12d,<span class="number">0x6</span></span><br><span class="line">   <span class="number">0x0000000000401130</span> &lt;+<span class="number">60</span>&gt;:    je     <span class="number">0x401153</span> &lt;phase_6+<span class="number">95</span>&gt;</span><br><span class="line">   <span class="number">0x0000000000401132</span> &lt;+<span class="number">62</span>&gt;:    mov    ebx,r12d</span><br><span class="line">   <span class="number">0x0000000000401135</span> &lt;+<span class="number">65</span>&gt;:    movsxd rax,ebx</span><br><span class="line">   <span class="number">0x0000000000401138</span> &lt;+<span class="number">68</span>&gt;:    mov    eax,DWORD PTR [rsp+rax*<span class="number">4</span>]<span class="comment">//这个循环是使后面的参数不能等于参数1</span></span><br><span class="line">   <span class="number">0x000000000040113b</span> &lt;+<span class="number">71</span>&gt;:    cmp    DWORD PTR [rbp+<span class="number">0x0</span>],eax</span><br><span class="line">   <span class="number">0x000000000040113e</span> &lt;+<span class="number">74</span>&gt;:    jne    <span class="number">0x401145</span> &lt;phase_6+<span class="number">81</span>&gt;</span><br><span class="line">   <span class="number">0x0000000000401140</span> &lt;+<span class="number">76</span>&gt;:    call   <span class="number">0x40143a</span> &lt;explode_bomb&gt;</span><br><span class="line">   <span class="number">0x0000000000401145</span> &lt;+<span class="number">81</span>&gt;:    add    ebx,<span class="number">0x1</span><span class="comment">//又是循环</span></span><br><span class="line">   <span class="number">0x0000000000401148</span> &lt;+<span class="number">84</span>&gt;:    cmp    ebx,<span class="number">0x5</span></span><br><span class="line">   <span class="number">0x000000000040114b</span> &lt;+<span class="number">87</span>&gt;:    jle    <span class="number">0x401135</span> &lt;phase_6+<span class="number">65</span>&gt;</span><br><span class="line">   <span class="number">0x000000000040114d</span> &lt;+<span class="number">89</span>&gt;:    add    r13,<span class="number">0x4</span><span class="comment">//参数2</span></span><br><span class="line">   <span class="number">0x0000000000401151</span> &lt;+<span class="number">93</span>&gt;:    jmp    <span class="number">0x401114</span> &lt;phase_6+<span class="number">32</span>&gt;</span><br><span class="line">   <span class="number">0x0000000000401153</span> &lt;+<span class="number">95</span>&gt;:    lea    rsi,[rsp+<span class="number">0x18</span>]<span class="comment">//这个是&#x27;\0&#x27;</span></span><br><span class="line">   <span class="number">0x0000000000401158</span> &lt;+<span class="number">100</span>&gt;:   mov    rax,r14</span><br><span class="line">   <span class="number">0x000000000040115b</span> &lt;+<span class="number">103</span>&gt;:   mov    ecx,<span class="number">0x7</span><span class="comment">//ecx永远是7</span></span><br><span class="line">   <span class="number">0x0000000000401160</span> &lt;+<span class="number">108</span>&gt;:   mov    edx,ecx</span><br><span class="line">   <span class="number">0x0000000000401162</span> &lt;+<span class="number">110</span>&gt;:   sub    edx,DWORD PTR [rax]<span class="comment">//7-当前参数</span></span><br><span class="line">   <span class="number">0x0000000000401164</span> &lt;+<span class="number">112</span>&gt;:   mov    DWORD PTR [rax],edx</span><br><span class="line">   <span class="number">0x0000000000401166</span> &lt;+<span class="number">114</span>&gt;:   add    rax,<span class="number">0x4</span><span class="comment">//地址+4，即下一个参数</span></span><br><span class="line">   <span class="number">0x000000000040116a</span> &lt;+<span class="number">118</span>&gt;:   cmp    rax,rsi</span><br><span class="line">   <span class="number">0x000000000040116d</span> &lt;+<span class="number">121</span>&gt;:   jne    <span class="number">0x401160</span> &lt;phase_6+<span class="number">108</span>&gt;</span><br><span class="line">   <span class="number">0x000000000040116f</span> &lt;+<span class="number">123</span>&gt;:   mov    esi,<span class="number">0x0</span></span><br><span class="line">   <span class="number">0x0000000000401174</span> &lt;+<span class="number">128</span>&gt;:   jmp    <span class="number">0x401197</span> &lt;phase_6+<span class="number">163</span>&gt;</span><br><span class="line">   <span class="number">0x0000000000401176</span> &lt;+<span class="number">130</span>&gt;:   mov    rdx,QWORD PTR [rdx+<span class="number">0x8</span>]<span class="comment">//rdx是node1</span></span><br><span class="line">   <span class="number">0x000000000040117a</span> &lt;+<span class="number">134</span>&gt;:   add    eax,<span class="number">0x1</span><span class="comment">//内层循环</span></span><br><span class="line">   <span class="number">0x000000000040117d</span> &lt;+<span class="number">137</span>&gt;:   cmp    eax,ecx</span><br><span class="line">   <span class="number">0x000000000040117f</span> &lt;+<span class="number">139</span>&gt;:   jne    <span class="number">0x401176</span> &lt;phase_6+<span class="number">130</span>&gt;</span><br><span class="line">   <span class="number">0x0000000000401181</span> &lt;+<span class="number">141</span>&gt;:   jmp    <span class="number">0x401188</span> &lt;phase_6+<span class="number">148</span>&gt;</span><br><span class="line">   <span class="number">0x0000000000401183</span> &lt;+<span class="number">143</span>&gt;:   mov    edx,<span class="number">0x6032d0</span><span class="comment">//链表处</span></span><br><span class="line">   <span class="number">0x0000000000401188</span> &lt;+<span class="number">148</span>&gt;:   mov    QWORD PTR [rsp+rsi*<span class="number">2</span>+<span class="number">0x20</span>],rdx</span><br><span class="line">   <span class="number">0x000000000040118d</span> &lt;+<span class="number">153</span>&gt;:   add    rsi,<span class="number">0x4</span><span class="comment">//每次加4的进行循环到0x18循环结束</span></span><br><span class="line">   <span class="number">0x0000000000401191</span> &lt;+<span class="number">157</span>&gt;:   cmp    rsi,<span class="number">0x18</span></span><br><span class="line">   <span class="number">0x0000000000401195</span> &lt;+<span class="number">161</span>&gt;:   je     <span class="number">0x4011ab</span> &lt;phase_6+<span class="number">183</span>&gt;</span><br><span class="line">   <span class="number">0x0000000000401197</span> &lt;+<span class="number">163</span>&gt;:   mov    ecx,DWORD PTR [rsp+rsi*<span class="number">1</span>]</span><br><span class="line">   <span class="number">0x000000000040119a</span> &lt;+<span class="number">166</span>&gt;:   cmp    ecx,<span class="number">0x1</span></span><br><span class="line">   <span class="number">0x000000000040119d</span> &lt;+<span class="number">169</span>&gt;:   jle    <span class="number">0x401183</span> &lt;phase_6+<span class="number">143</span>&gt;</span><br><span class="line">   <span class="number">0x000000000040119f</span> &lt;+<span class="number">171</span>&gt;:   mov    eax,<span class="number">0x1</span></span><br><span class="line">   <span class="number">0x00000000004011a4</span> &lt;+<span class="number">176</span>&gt;:   mov    edx,<span class="number">0x6032d0</span></span><br><span class="line">   <span class="number">0x00000000004011a9</span> &lt;+<span class="number">181</span>&gt;:   jmp    <span class="number">0x401176</span> &lt;phase_6+<span class="number">130</span>&gt;</span><br><span class="line">   <span class="number">0x00000000004011ab</span> &lt;+<span class="number">183</span>&gt;:   mov    rbx,QWORD PTR [rsp+<span class="number">0x20</span>]<span class="comment">//指针数组存在rsp中</span></span><br><span class="line">   <span class="number">0x00000000004011b0</span> &lt;+<span class="number">188</span>&gt;:   lea    rax,[rsp+<span class="number">0x28</span>]</span><br><span class="line">   <span class="number">0x00000000004011b5</span> &lt;+<span class="number">193</span>&gt;:   lea    rsi,[rsp+<span class="number">0x50</span>]</span><br><span class="line">   <span class="number">0x00000000004011ba</span> &lt;+<span class="number">198</span>&gt;:   mov    rcx,rbx</span><br><span class="line">   <span class="number">0x00000000004011bd</span> &lt;+<span class="number">201</span>&gt;:   mov    rdx,QWORD PTR [rax]</span><br><span class="line">   <span class="number">0x00000000004011c0</span> &lt;+<span class="number">204</span>&gt;:   mov    QWORD PTR [rcx+<span class="number">0x8</span>],rdx</span><br><span class="line">   <span class="number">0x00000000004011c4</span> &lt;+<span class="number">208</span>&gt;:   add    rax,<span class="number">0x8</span></span><br><span class="line">   <span class="number">0x00000000004011c8</span> &lt;+<span class="number">212</span>&gt;:   cmp    rax,rsi</span><br><span class="line">   <span class="number">0x00000000004011cb</span> &lt;+<span class="number">215</span>&gt;:   je     <span class="number">0x4011d2</span> &lt;phase_6+<span class="number">222</span>&gt;</span><br><span class="line">   <span class="number">0x00000000004011cd</span> &lt;+<span class="number">217</span>&gt;:   mov    rcx,rdx</span><br><span class="line">   <span class="number">0x00000000004011d0</span> &lt;+<span class="number">220</span>&gt;:   jmp    <span class="number">0x4011bd</span> &lt;phase_6+<span class="number">201</span>&gt;</span><br><span class="line">   <span class="number">0x00000000004011d2</span> &lt;+<span class="number">222</span>&gt;:   mov    QWORD PTR [rdx+<span class="number">0x8</span>],<span class="number">0x0</span></span><br><span class="line">   <span class="number">0x00000000004011da</span> &lt;+<span class="number">230</span>&gt;:   mov    ebp,<span class="number">0x5</span></span><br><span class="line">   <span class="number">0x00000000004011df</span> &lt;+<span class="number">235</span>&gt;:   mov    rax,QWORD PTR [rbx+<span class="number">0x8</span>]</span><br><span class="line">   <span class="number">0x00000000004011e3</span> &lt;+<span class="number">239</span>&gt;:   mov    eax,DWORD PTR [rax]</span><br><span class="line">   <span class="number">0x00000000004011e5</span> &lt;+<span class="number">241</span>&gt;:   cmp    DWORD PTR [rbx],eax</span><br><span class="line">   <span class="number">0x00000000004011e7</span> &lt;+<span class="number">243</span>&gt;:   jge    <span class="number">0x4011ee</span> &lt;phase_6+<span class="number">250</span>&gt;<span class="comment">//参数1&gt;参数2</span></span><br><span class="line">   <span class="number">0x00000000004011e9</span> &lt;+<span class="number">245</span>&gt;:   call   <span class="number">0x40143a</span> &lt;explode_bomb&gt;</span><br><span class="line">   <span class="number">0x00000000004011ee</span> &lt;+<span class="number">250</span>&gt;:   mov    rbx,QWORD PTR [rbx+<span class="number">0x8</span>]</span><br><span class="line">   <span class="number">0x00000000004011f2</span> &lt;+<span class="number">254</span>&gt;:   sub    ebp,<span class="number">0x1</span></span><br><span class="line">   <span class="number">0x00000000004011f5</span> &lt;+<span class="number">257</span>&gt;:   jne    <span class="number">0x4011df</span> &lt;phase_6+<span class="number">235</span>&gt;</span><br><span class="line">   <span class="number">0x00000000004011f7</span> &lt;+<span class="number">259</span>&gt;:   add    rsp,<span class="number">0x50</span></span><br><span class="line">   <span class="number">0x00000000004011fb</span> &lt;+<span class="number">263</span>&gt;:   pop    rbx</span><br><span class="line">   <span class="number">0x00000000004011fc</span> &lt;+<span class="number">264</span>&gt;:   pop    rbp</span><br><span class="line">   <span class="number">0x00000000004011fd</span> &lt;+<span class="number">265</span>&gt;:   pop    r12</span><br><span class="line">   <span class="number">0x00000000004011ff</span> &lt;+<span class="number">267</span>&gt;:   pop    r13</span><br><span class="line">   <span class="number">0x0000000000401201</span> &lt;+<span class="number">269</span>&gt;:   pop    r14</span><br><span class="line">   <span class="number">0x0000000000401203</span> &lt;+<span class="number">271</span>&gt;:   ret</span><br><span class="line">End of assembler dump.</span><br></pre></td></tr></table></figure>

<p>在read_six_numbers函数中我们看出用rsp开辟了0x18空间，所以输入数在rsp中</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-LAB/image-20220303205629062.png" alt="image-20220303205629062"></p>
<p>我们发现这个就是对链表进行升序排序:{14C,1,A8,2,39C,3,2B3,4,1DD,5,1BB,6}</p>
<p>所以答案是；4 3 2 1 6 5</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/CSAPP-LAB/image-20220303212529967.png" alt="image-20220303212529967"></p>
<p>起飞！！！这个比datalab好玩多了</p>
<h1 id="CSAPP-7-END"><a href="#CSAPP-7-END" class="headerlink" title="CSAPP-7-END"></a>CSAPP-7-END</h1><h2 id="链接"><a href="#链接" class="headerlink" title="链接"></a>链接</h2><p>链接时将各种代码和数据片段收集并组合成为一个单一文件的过程，这个文件可以被加载到内存并执行。链接可以执行于编译时，也可以执行与加载时，甚至可以执行于运行时。在现代系统中，链接是由链接器程序自动执行。</p>
<p>链接可以是软件开发中分离编译</p>
<h3 id="7-1、编译器驱动程序"><a href="#7-1、编译器驱动程序" class="headerlink" title="7.1、编译器驱动程序"></a>7.1、编译器驱动程序</h3><p>main.c执行过程：先通过c预处理器，成为ascii码编写的main.i程序，接下来由c编译器将其编为ascii汇编语言文件main.s，然后汇编器将其变成可重定位目标文件main.o，如果需要链接，最后运行链接器ld，将必要文件链接，成为可执行文件，在shell里运行需要调用loader即加载器。</p>
<h3 id="7-2、静态链接"><a href="#7-2、静态链接" class="headerlink" title="7.2、静态链接"></a>7.2、静态链接</h3><p>链接器的两大任务：</p>
<p>符号解析。目标文件定义和引用符号，每个符号对应于1个函数，一个全局变量或者一个静态变量，其目的就是为了将每个符号引用正好和一个符号定义关联起来。</p>
<p>重定位。编译器和汇编器生成从0开始的代码和数据节。链接器通过把每个符号定位于一个内存位置关联起来，从而重定位这些节，再修改符号引用，使得他们指向这个内存位置。</p>
<h3 id="7-3、目标文件"><a href="#7-3、目标文件" class="headerlink" title="7.3、目标文件"></a>7.3、目标文件</h3><p>三种文件：</p>
<p>可重定位目标文件：含二进制代码和数据，其形式能于其他可重定位目标文件合并起来。</p>
<p>可执行文件：包含二进制和数据，其形式可以直接复制到内存中并执行</p>
<p>共享目标文件：一种特殊的可重定位目标文件，可在加载或者运行时被动态的加载进内存并链接</p>
<p>目标文件就是以文件形式存放再磁盘中的目标模块，而目标模块时一个字节序列</p>
<h3 id="7-4、可重定位目标文件"><a href="#7-4、可重定位目标文件" class="headerlink" title="7.4、可重定位目标文件"></a>7.4、可重定位目标文件</h3><p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/csapp-s2e/image-20220317175712426.png" alt="image-20220317175712426"></p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/csapp-s2e/image-20220317175850287.png" alt="image-20220317175850287"></p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/csapp-s2e/image-20220317175859399.png" alt="image-20220317175859399"></p>
<h3 id="7-5、符号和符号表"><a href="#7-5、符号和符号表" class="headerlink" title="7.5、符号和符号表"></a>7.5、符号和符号表</h3><p>每个重定位的目标模块都存在一个符号表,其包括m定义和引用符号的消息.在链接器的上下文,存在三种符号</p>
<p>由m定义并能被其他模块引用的全局符号.全局链接器符号对应于非静态的c函数和全局变量</p>
<p>由其他模块定义并被m引用的全局符号.这些符号叫外部符号,对应其他模块中定义的非静态c函数和全局变量</p>
<p>只被模块m定义和引用的局部符号,他们对应于带static的c函数和全局变量.这些符号全局可见,但不可引用</p>
<p>本地链接器符号和本地程序变量不同</p>
<p>.symtab中的符号表不包括对应于本地非静态程序变量的任何符号,这些符号是在栈中管理的,也就是局部变量</p>
<p>static的变量在.data或者.bss中为其分配空间</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/csapp-s2e/image-20220317185459019.png" alt="image-20220317185459019"></p>
<p>name是字符串表的字节偏移,指向符号以null结尾的字符串名字.value是符号地址,size是目标大小,type通常是数据或函数,blinging表明是全局还是本地。</p>
<p>每个符号都被分配到某个节,由section字段表示。</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/csapp-s2e/image-20220317191156258.png" alt="image-20220317191156258"></p>
<h3 id="7-6、符号解析"><a href="#7-6、符号解析" class="headerlink" title="7.6、符号解析"></a>7.6、符号解析</h3><p>链接器解析符号引用的方法是将每个引用与它输入的可重定位目标文件的符号表中的一个确定的符号定义关联起来。</p>
<p>对于全局符号解析采用假设法,如果不是就终止。</p>
<p>重载:对于一些方法在源代码中有相同的名字,却有不同参数列表,c++和java使用重载函数.,是因为编译器将每一个唯一的方法和参数列表组合编码成一个,对链接器来说是唯一的名字,这就是重载,相反的过程叫恢复。</p>
<h4 id="7-6-1、链接器如何解析多重定义的全局变量"><a href="#7-6-1、链接器如何解析多重定义的全局变量" class="headerlink" title="7.6.1、链接器如何解析多重定义的全局变量"></a>7.6.1、链接器如何解析多重定义的全局变量</h4><p>多个模块定义同名的全局符号:</p>
<p>首先分为强和弱,函数和已初始化的变量是强符号,未初始化的全局变量是弱符号。</p>
<p>有三个规则,不允许有多个同名的强符号,如果有一个强符号与多个弱符号同名,选择强符号,如果有多个弱符号同名,任选一个。</p>
<h3 id="7-6-2、与静态库链接"><a href="#7-6-2、与静态库链接" class="headerlink" title="7.6.2、与静态库链接"></a>7.6.2、与静态库链接</h3><p>所有编译系统提供机制：将所有相关的目标模块打包成为一个单独的文件，成为静态库，可作为链接库的输入。这样的操作减少内存的使用或者减少操作每个函数的重复性，直接调用库函数就解决问题了。</p>
<h3 id="7-6-3、链接器如何使用静态库来解析引用"><a href="#7-6-3、链接器如何使用静态库来解析引用" class="headerlink" title="7.6.3、链接器如何使用静态库来解析引用"></a>7.6.3、链接器如何使用静态库来解析引用</h3><p>在linux链接器及逆行符号解析阶段时，链接器从左到右扫描命令行出现顺序的可重定位目标文件和存档文件。在这当中链接器维护一个可重定位目标文件的集合E（被认为是可执行文件），一个违背解析符号的集合U（被引用但未被定义的符号），以及一个在前面输入文件已定义的符号集合D。</p>
<p>对于命令行上的输入文件，如果是目标文件f，链接器把f添加到E，修改U和D来反映f中的符号定义和引用，并继续下一个输入文件。</p>
<p>如果是存档文件，那么链接器久长时匹配U中未解析的符号和有存档文件成员定义的符号，对于其中成员m，定义一个符号解析U中的一个引用，将m加入E，修改U和D来反映m中的符号定义和引用。当U和D都不变,不再在E中包含的成员，都被丢弃，输入下个文件。</p>
<p>如果扫描后U非空，直接输出错误，否则U会和重定位E中的目标文件，构建输出的可执行文件、</p>
<h3 id="7-7、重定位"><a href="#7-7、重定位" class="headerlink" title="7.7、重定位"></a>7.7、重定位</h3><p>链接器完成符号解析后，就把代码中的每个符号引用和正好一个符号定义关联起来，此时，链接器直到目标module中代码节和data节大小，就可以重定位了：</p>
<p>1.重定位和符号定义。链接器将相同类型的节合并成同一类型的聚合节，比如.data节合成一个.data节，这就成为了可执行文件的.data节，然后链接器将运行时内存地址付给新的聚合节，赋给输入模块定义的每个节以及符号，完成时，程序每条指令和全局变量都有唯一的运行时内存地址</p>
<p>2.重定位节的符号引用。链接器修改代码节和数据节中对每个符号的引用，使得她们指向正确的运行时地址，这一步依赖于可重定位目标模块中成为重定位条目的数据结构</p>
<p>7.7.1、重定位条目</p>
<p>重定位条目会告诉链接器在将目标文件合并成可执行文件时如何修改这个引用，代码重定位条目存放在.rel.text中，已初始化的放在.rel.data</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/csapp-s2e/image-20220330144554826.png" alt="image-20220330144554826"></p>
<h3 id="7-7-2、重定位符号引用"><a href="#7-7-2、重定位符号引用" class="headerlink" title="7.7.2、重定位符号引用"></a>7.7.2、重定位符号引用</h3><p>重定位算法：</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/csapp-s2e/image-20220330150855839.png" alt="image-20220330150855839"></p>
<p>汇编器会为每一个引用产生一个重定位条目，在引用后面的一行</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/csapp-s2e/image-20220330151839295.png" alt="image-20220330151839295"></p>
<p>1.重定位PC相对引用</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/csapp-s2e/image-20220330152051016.png" alt="image-20220330152051016"></p>
<p>sum正好处于第6行，而且是0xf位，在内存中运行时的地址&#x3D;基址+偏移&#x3D;0x4004d0 + 0xf</p>
<p>这个等式，其中0x5就是第6行有5字节，执行完是0x5字节</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/csapp-s2e/image-20220330195229301.png" alt="image-20220330195229301"></p>
<p>2.重定位绝对引用</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/csapp-s2e/image-20220330195407058.png" alt="image-20220330195407058"></p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/csapp-s2e/image-20220330195411404.png" alt="image-20220330195411404"></p>
<h3 id="7-8、可执行目标文件"><a href="#7-8、可执行目标文件" class="headerlink" title="7.8、可执行目标文件"></a>7.8、可执行目标文件</h3><p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/csapp-s2e/image-20220330161638664.png" alt="image-20220330161638664"></p>
<p>.init节定义了小函数，会被藏东西的，程序初始化代码会调用它，因为可执行文件是完全链接的，已经重定位，所以不需要.rel节</p>
<p>可执行文件的连续的片（chunk）被映射到连续的内存段，程序头部表描述映射关系</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/csapp-s2e/image-20220330161932306.png" alt="image-20220330161932306"></p>
<p>第2行的大小0x69c，包含ELF头和程序头部表，init，text，rodata节</p>
<p>3，4行存储.data节和.bss节</p>
<h3 id="7-9、加载可执行目标文件"><a href="#7-9、加载可执行目标文件" class="headerlink" title="7.9、加载可执行目标文件"></a>7.9、加载可执行目标文件</h3><p>我们用加载器来加载可执行文件，运行时存在内存映像，从0x400000开始，后面是数据段，运行时堆在数据段后，通过调用malloc库向上增长，用户栈总是从最大合法用户地址2的48次幂-1开始，想较小内存地址增长。栈上区域从地址2d的48次幂开始，是为内核kernel中的代码和数据进行保留的，内核就是操作系统驻留在内存的部分</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/csapp-s2e/image-20220330164410397.png" alt="image-20220330164410397"></p>
<h3 id="7-10、动态链接共享库"><a href="#7-10、动态链接共享库" class="headerlink" title="7.10、动态链接共享库"></a>7.10、动态链接共享库</h3><p>共享库是致力于解决静态库缺陷的一个现代产物，运行加载时可以加载到任意模块，并和一个在内存中的程序链接起来，可以加载到任何内存地址，并和内存中的程序连接起来，这个过程称为动态链接，是由动态链接器执行的。共享库也叫做共享目标，在linux中用.so文件，微软使用的共享库成为dll</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/csapp-s2e/image-20220330182320641.png" alt="image-20220330182320641"></p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/csapp-s2e/image-20220330182504346.png" alt="image-20220330182504346"></p>
<h3 id="7-11、从应用程序中加载和链接共享库"><a href="#7-11、从应用程序中加载和链接共享库" class="headerlink" title="7.11、从应用程序中加载和链接共享库"></a>7.11、从应用程序中加载和链接共享库</h3><p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/csapp-s2e/image-20220330184616086.png" alt="image-20220330184616086"></p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/csapp-s2e/image-20220330184631787.png" alt="image-20220330184631787"></p>
<h3 id="7-12、位置无关代码"><a href="#7-12、位置无关代码" class="headerlink" title="7.12、位置无关代码"></a>7.12、位置无关代码</h3><p>共享库是为了节约内存资源而诞生的，如果多个进程共用一个库，那么再每个内存的位置，甚至大小都不同，那么就应该使用：位置无关代码PIC，可以加载无需重定位的代码叫做PIC，这个东西可以把库加载到内存任何位置且不用修改链接器。</p>
<p>1、PIC数据引用</p>
<p>无论我们在内存加载什么模块，数据段和代码段的距离一直不变，即，代码段任何指令与数据段的变量之间的距离在运行时都是一个常量，与二者的绝对内存位置是无关的。PIC在数据段的开始处创建一个表，即全局偏移量表GOT。在GOT中，每个被这个目标module引用的全局数据目标都有一个8字节的条目。编译器还为GOT中的条目生成重定位记录，加载时动态链接器重定位每个条目并使其包含正确的绝对地址</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/csapp-s2e/image-20220330190117921.png" alt="image-20220330190117921"></p>
<p>2、PIC函数调用</p>
<p>程序调用一个共享库中的函数，该函数可以存在于内存中任何地址，这就很折磨了，但通过延迟绑定，我们将过程地址的绑定推迟到第一次调用该过程时。</p>
<p>延迟绑定是通过GOT和过程链接表PLT，这两个数据结构完成的、GOT属于数据段，PLT属于代码段</p>
<p>PLT：是个数组，每个条目是16字节代码，PLT【0】很特殊，器跳转到动态链接器中，每个库函数都有自己的条目</p>
<p>GOT：是个数组，每个条目是8字节代码，GOT[0]和GOT[1]是加载时的函数，其余的会与PLT一一对应</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/csapp-s2e/image-20220330191054571.png" alt="image-20220330191054571"></p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/csapp-s2e/image-20220330192218540.png" alt="image-20220330192218540"></p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/csapp-s2e/image-20220330192224264.png" alt="image-20220330192224264"></p>
<h3 id="7-13、库打桩机制"><a href="#7-13、库打桩机制" class="headerlink" title="7.13、库打桩机制"></a>7.13、库打桩机制</h3><p>简单来说就是欺骗系统调用的包装函数，插入自己的函数进去，想拿到什么值都可以。</p>
<h1 id="异常控制流"><a href="#异常控制流" class="headerlink" title="异常控制流"></a>异常控制流</h1><p>异常控制流指的是：现代系统通过使控制流繁盛突变来对这些情况做出反应，这些突变叫做异常控制流（ECF）。异常控制流发生在计算机的每个层次上，在硬件层上会发生，在操作系统层上，内核通过上下文切换进行进程的切换，在应用层中，一个进程可以发送信号到另一个进程</p>
<h2 id="8-1、异常"><a href="#8-1、异常" class="headerlink" title="8.1、异常"></a>8.1、异常</h2><p>异常是异常控制流的一种形式，一部分由硬件实现，一部分由操作系统实现。</p>
<p>当处理器检测到由事件发生时，它会通过一张叫做异常表的跳转表，进行间接的调用，到专门处理此类事件的操作系统子程序，即异常处理程序，处理完成，出现三种情况：</p>
<p>1.控制返回原指令</p>
<p>2.返回给原指令，没异常就执行下一条指令</p>
<p>3.终止被中断的程序</p>
<h3 id="8-1-1、异常处理"><a href="#8-1-1、异常处理" class="headerlink" title="8.1.1、异常处理"></a>8.1.1、异常处理</h3><p>系统中每种异常都有一个唯一的非负整数的异常号</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/csapp-s2e/image-20220407161312042.png" alt="image-20220407161312042"></p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/csapp-s2e/image-20220407161502198.png" alt="image-20220407161502198"></p>
<h3 id="8-1-2、异常的类别"><a href="#8-1-2、异常的类别" class="headerlink" title="8.1.2、异常的类别"></a>8.1.2、异常的类别</h3><p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/csapp-s2e/image-20220407161528243.png" alt="image-20220407161528243"></p>
<p>1.中断</p>
<p>中断是异步，硬件中断的异常处理程序通常称为中断处理程序，</p>
<p>中断处理将控制返回给应用程序的下一条指令。</p>
<p>2.陷阱和系统调用</p>
<p>陷阱是有意的异常，是执行一条指令的结果。返回下一条指令。其最重要的功能是在用户程序和内核之间提供一个像过程一样的接口，叫做系统调用。</p>
<p>读取文件，创建新的进程，加载新的程序，结束程序都要像内核请求</p>
<p>3.故障</p>
<p>故障由错误引起，当发生故障时，交给故障处理程序。它会返回引起故障的指令，重新执行</p>
<p>4.终止</p>
<p>终止是不可恢复的致命错误造成的结果，通常是硬件错误。直接终止应用程序</p>
<h3 id="8-1-3、linux-x2F-x86-64的异常"><a href="#8-1-3、linux-x2F-x86-64的异常" class="headerlink" title="8.1.3、linux&#x2F;x86-64的异常"></a>8.1.3、linux&#x2F;x86-64的异常</h3><p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/csapp-s2e/image-20220407164830759.png" alt="image-20220407164830759"></p>
<p>对于linux的系统调用，每个应用想要请求内核服务时，都有唯一一个整数号对应于一个内核中的跳转表的偏移量，c语言用syscall函数来调用系统调用，但实际上对于大多数系统调用，c语言采用包装函数，包装函数将参数打包在一起，以适当系统调用使指令陷入内核。</p>
<p>系统调用和包装函数统称为系统级函数。在linux的系统调用通常使用寄存器不通过栈传递。</p>
<p>%rax为系统调用号，剩下rdi，rsi，rdx，r10，r8，r9当参数，rax还返回返回值，-4095到-1的负数返回值表示出错</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/csapp-s2e/image-20220407165613175.png" alt="image-20220407165613175"></p>
<h3 id="8-2、进程"><a href="#8-2、进程" class="headerlink" title="8.2、进程"></a>8.2、进程</h3><p>异常是允许操纵系统内核提供进程概念的基本构造块。</p>
<p>在一个执行中程序的实例就是进程，系统的每个程序都运行在某个进程的上下文中。</p>
<p>上下文是由程序正确运行所需的状态组成的。这个状态包括放在内存中的程序的代码和数据，它的栈，通用目的寄存器的内容，程序技术器，环境变量以及打开文件描述符号的集合。</p>
<h3 id="8-2-1、逻辑控制流"><a href="#8-2-1、逻辑控制流" class="headerlink" title="8.2.1、逻辑控制流"></a>8.2.1、逻辑控制流</h3><p>不多解释，已经很清楚</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/csapp-s2e/image-20220407171051825.png" alt="image-20220407171051825"></p>
<h3 id="8-2-2、并发流"><a href="#8-2-2、并发流" class="headerlink" title="8.2.2、并发流"></a>8.2.2、并发流</h3><p>一个逻辑流的执行在时间上与另一个流重叠，这个就是字面意思，并发运行就是两个程序运行有时间上的交错。</p>
<h3 id="8-2-3、私有地址空间"><a href="#8-2-3、私有地址空间" class="headerlink" title="8.2.3、私有地址空间"></a>8.2.3、私有地址空间</h3><p>在一个程序中，进程为其提供自己的私有地址空间，这个空间是不能被别的进程进行r or w。</p>
<h3 id="8-2-4用户模式和内核模式"><a href="#8-2-4用户模式和内核模式" class="headerlink" title="8.2.4用户模式和内核模式"></a>8.2.4用户模式和内核模式</h3><p>为了使操作系统内核提供一个无懈可击的进程抽象，处理器必须提供一种机制，限制一个应用可以执行的指令以及它可以访问的地址空间范围</p>
<p>处理器通常使用某个控制寄存器中的一个模式位来提供这种功能，该寄存器在该进程中有特权。当设置了模式位，进程就运行在内核模式中，即超级用户模式。</p>
<p>用户模式改变为内核模式唯一方法就是通过中断，故障或者陷入系统调用这种异常。</p>
<p>linux中存在&#x2F;proc文件系统，可允许用户访问内核数据结构的内容。</p>
<h3 id="8-2-5、上下文切换"><a href="#8-2-5、上下文切换" class="headerlink" title="8.2.5、上下文切换"></a>8.2.5、上下文切换</h3><p>操作系统内核使用上下文切换的较高层形式的异常控制流来实现多任务。在进程执行的时候，内核可以决定抢占当前进程，这就叫调度，由内核中的调度器代码完成。</p>
<h2 id="8-3、进程控制"><a href="#8-3、进程控制" class="headerlink" title="8.3、进程控制"></a>8.3、进程控制</h2><h3 id="8-3-1、获取进程ID"><a href="#8-3-1、获取进程ID" class="headerlink" title="8.3.1、获取进程ID"></a>8.3.1、获取进程ID</h3><p>每个进程都有自己的PID。</p>
<p>getpid函数返回调用进程的PID。</p>
<p>getppid函数返回它的父进程PID。</p>
<h3 id="8-3-2、创建和终止进程"><a href="#8-3-2、创建和终止进程" class="headerlink" title="8.3.2、创建和终止进程"></a>8.3.2、创建和终止进程</h3><p>进程总是有三种状态，</p>
<p>1.运行：要么在cpu上执行，要么就在等待内核的调度</p>
<p>2.停止：进程执行要么被挂起，且不会调度。当收到sigstop，sigtstp，sigttn或者sigttou时，进程就停止，并且停止直到收到sigcont信号，然后运行</p>
<p>3.终止：进程停止，进程停止有三种原因：收到信号，return从主函数，exit</p>
<p>父进程通过调用fork函数创建新子进程，子进程几乎与父进程相同，子进程得到与父进程用户级虚拟地址空间相同的副本，当父进程调用fork时，子进程可以读写父进程中打开的任何文件。父子进程最大区别是PID不同</p>
<p>fork函数被调用一次，却返回两次，一次在调用父进程中，一次是在新创建的子进程中，父进程中，返回子进程的PID。子进程中返回0，通过返回值我们能直到程序是在父进程中进行还是子进程中执行</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">pid_t</span> pid;</span><br><span class="line">    <span class="type">int</span> x = <span class="number">1</span>;</span><br><span class="line">    pid = Fork();</span><br><span class="line">    <span class="keyword">if</span> (pid == <span class="number">0</span>)&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;child: x = %d\n&quot;</span>,++x);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;parent: x = %d\n&quot;</span>,--x);</span><br><span class="line">    <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在linux下运行，发现先返回parent是0，再返回child是2，那么以下就是几个特性了：</p>
<p>1.调用1次，返回了两次</p>
<p>2.并发执行：先返回父进程再返回子进程，但实际上来说并不一定，在另一台机器上就可能不是这样的情况</p>
<p>3.相同但是独立的地址空间：子进程和父进程的地址空间以及值什么的都相同，我们发现x的值并无变化，所以再两个进程中是独立的过程，不互相影响</p>
<p>4.共享文件：输出都在屏幕上</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/csapp-s2e/image-20220407190742632.png" alt="image-20220407190742632"></p>
<h3 id="8-3-3、回收子进程"><a href="#8-3-3、回收子进程" class="headerlink" title="8.3.3、回收子进程"></a>8.3.3、回收子进程</h3><p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/csapp-s2e/image-20220407190946484.png" alt="image-20220407190946484"></p>
<p>如果父进程终止了，内核会安排init进程成为其父进程。init的PID为1，其不会终止时所有进程的祖先。一个进程可以通过waitpid函数来等待其子进程终止或停止。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">pid_t</span> <span class="title function_">waitpid</span><span class="params">(<span class="type">pid_t</span> pid, <span class="type">int</span> *statusp, <span class="type">int</span> options)</span></span><br></pre></td></tr></table></figure>

<p>1.pid &#x3D; -1 ,等待的集合就是父进程的所有子进程</p>
<p>pid&gt;0，单独子进程，进程ID为pid</p>
<p>2.修改默认行为</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/csapp-s2e/image-20220407194955709.png" alt="image-20220407194955709"></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">pid_t</span> <span class="title function_">wait</span> <span class="params">(<span class="type">int</span> *statusp)</span></span><br><span class="line"><span class="title function_">wait</span><span class="params">(&amp;s)</span> 完全等价于 <span class="title function_">waitpid</span><span class="params">(<span class="number">-1</span>, &amp;s, <span class="number">0</span>)</span></span><br></pre></td></tr></table></figure>

<p>回收顺序时这台电脑的特殊属性，不确定</p>
<h3 id="8-3-4、进程休眠"><a href="#8-3-4、进程休眠" class="headerlink" title="8.3.4、进程休眠"></a>8.3.4、进程休眠</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">unsigned</span> <span class="type">int</span> sleep（<span class="type">unsigned</span> <span class="type">int</span> second）</span><br></pre></td></tr></table></figure>

<p>sleep让一个进程挂起一段时间</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> pause（<span class="type">void</span>）</span><br></pre></td></tr></table></figure>

<p>让调用函数休眠，征集到该进程接收到一个信号</p>
<h3 id="8-3-5、加载并运行程序"><a href="#8-3-5、加载并运行程序" class="headerlink" title="8.3.5、加载并运行程序"></a>8.3.5、加载并运行程序</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> execv（<span class="type">const</span> <span class="type">char</span> *filename, <span class="type">const</span> <span class="type">char</span> *argv[],<span class="type">const</span> <span class="type">char</span> *envp[])</span><br></pre></td></tr></table></figure>

<p>该函数加载运行可执行文件filename，且带参数argv和环境变量列表envp，找不到filename就返回其调用程序，这个函数调用一次从不返回。</p>
<h2 id="8-4、信号"><a href="#8-4、信号" class="headerlink" title="8.4、信号"></a>8.4、信号</h2><p>Linux信号属于软件形式的异常，一个信号就是一个小消息，其通知进程系统种发生了某件类型的事件，如下图：</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/csapp-s2e/image-20220409213205635.png" alt="image-20220409213205635"></p>
<p>低层的硬件异常是由内核异常处理程序处理的</p>
<h3 id="8-4-1、信号术语"><a href="#8-4-1、信号术语" class="headerlink" title="8.4.1、信号术语"></a>8.4.1、信号术语</h3><p>传送一个信号到目的进程由两个步骤组成：</p>
<p>发送信号：内核通过更新目的进程上下文的状态来发送一个信号给目的进程，或者一个进程调用kill函数，显示的要求内核发信号给目的进程。</p>
<p>接收信号：当目的进程被内核强迫以某种方式对信号的发送做出反应时，就接受了信号</p>
<p>一个发出但没接收到的信号叫做待处理信号，一种类型的待处理信号在一个进程中最多只有一个，其余的都被丢弃。当然还可以通过阻塞这种方式选择性接受信号。</p>
<p>在内核中有一个集合，这个集合有所有信号，一旦接收到信号，这个信号就会从集合中被剔除。</p>
<h3 id="8-4-2、发送信号"><a href="#8-4-2、发送信号" class="headerlink" title="8.4.2、发送信号"></a>8.4.2、发送信号</h3><p>发送信号的机制基于进程组这个概念</p>
<p>1.进程组</p>
<p>每个进程属于一个进程组，进程组是由一个正整数进程组ID来标志的。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">pid_t</span> <span class="title function_">getpgrp</span><span class="params">(<span class="type">void</span>)</span>;<span class="comment">//返回当前进程的id</span></span><br></pre></td></tr></table></figure>

<p>默认的，一个子进程和其父进程同属于一个进程组</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">setpgid</span><span class="params">(<span class="type">pid_t</span> pid, <span class="type">pid_t</span> pgid)</span>;<span class="comment">//若成功返回0，不成功返回-1，该函数可以改变自己和其他进程的进程组</span></span><br></pre></td></tr></table></figure>

<p>pid的进程改为pidg,若pid为0，使用当前进程PID，弱pgid为0，用pid的PID为进程组ID，如果进程15213是调用进程，再把两个参数设为0，会创建新的进程组，其ID是15213，并把这个进程加到新进程组中。</p>
<p>2.用&#x2F;bin&#x2F;kill程序来发送信号</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/csapp-s2e/image-20220409214918203.png" alt="image-20220409214918203"></p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/csapp-s2e/image-20220409215023731.png" alt="image-20220409215023731"></p>
<p>4.调用kill函数发送信号</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">kill</span><span class="params">(<span class="type">pid_t</span> pid, <span class="type">int</span> sig)</span>;</span><br></pre></td></tr></table></figure>

<p>若pid大于0，发送信号号码给sig给pid，若等于0发送给进程组每个进程，小于0，发送绝对值的pid到每个进程。</p>
<p>5.alarm函数发送信号</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">unsigned</span> <span class="type">int</span> <span class="title">alarm</span><span class="params">(<span class="type">unsigned</span> <span class="type">int</span> secs)</span></span>;<span class="comment">//返回前一次闹钟秒数，若未设闹钟则为0</span></span><br></pre></td></tr></table></figure>

<p>该函数安排内核在secs秒后发送SIGALARM信号给调用进程</p>
<h3 id="8-4-3、接收信号"><a href="#8-4-3、接收信号" class="headerlink" title="8.4.3、接收信号"></a>8.4.3、接收信号</h3><p>当内核模式变成用户模式时，进程检查未被阻塞的待处理信号的集合，若不为空，该进程接收某个信号，每个信号都有一个预定义默认行为：</p>
<p>进程终止，进程终止并转储内存，进程挂起直到被SIGCONT信号重启，进程忽略该信号</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/csapp-s2e/image-20220409220108931.png" alt="image-20220409220108931"></p>
<h3 id="8-4-4、阻塞和解除阻塞信号"><a href="#8-4-4、阻塞和解除阻塞信号" class="headerlink" title="8.4.4、阻塞和解除阻塞信号"></a>8.4.4、阻塞和解除阻塞信号</h3><p>隐式阻塞机制。内核默认阻塞任何当前处理程序正在处理信号类型的待处理的信号。</p>
<p>显式阻塞机制。调用函数，来明确阻塞信号</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/csapp-s2e/image-20220410205254755.png" alt="image-20220410205254755"></p>
<h3 id="8-4-5、编写信号处理程序"><a href="#8-4-5、编写信号处理程序" class="headerlink" title="8.4.5、编写信号处理程序"></a>8.4.5、编写信号处理程序</h3><p>1.安全的信号处理</p>
<p>信号处理程序回合主程序和其他信号处理程序并发运行，要注意以下事项：</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/csapp-s2e/image-20220410205657029.png" alt="image-20220410205657029"></p>
<p>输出的唯一安全方法是write，还有一些专门开发函数：</p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/csapp-s2e/image-20220410205814914.png" alt="image-20220410205814914"></p>
<p><img src="/2022/01/26/CSAPP/../../blog/source/_posts/csapp-s2e/image-20220410210008538.png" alt="image-20220410210008538"></p>
<p>2.正常信号处理</p>
<p>未处理的信号是不排队的，直接被丢弃了。</p>
<p>3.可移植的信号处理</p>
<p>signal函数语义不同，在一些unix系统上，如信号k被捕获后必须将信号k恢复成默认值，所以每次运行后都要调用signal函数，显式的重新设置自己</p>
<p>系统调用可以中断，read write accept这些系统调用会阻塞进程一段进程一段时间，称为慢速系统调用</p>
<p><img src="/../../../Users/86159/AppData/Roaming/Typora/typora-user-images/image-20220412135816648.png" alt="image-20220412135816648"></p>
<h3 id="8-4-6、同步流避免并发错误"><a href="#8-4-6、同步流避免并发错误" class="headerlink" title="8.4.6、同步流避免并发错误"></a>8.4.6、同步流避免并发错误</h3><p>看不懂了</p>
<h3 id="8-4-7、显式地等待信号"><a href="#8-4-7、显式地等待信号" class="headerlink" title="8.4.7、显式地等待信号"></a>8.4.7、显式地等待信号</h3><p>不懂。</p>
<h2 id="8-5、非本地跳转"><a href="#8-5、非本地跳转" class="headerlink" title="8.5、非本地跳转"></a>8.5、非本地跳转</h2><p>c语言提供一种用户级的异常控制流形式，称为非本地跳转，他将控制直接从一个函数转移到另一个当前正在执行的函数，通过setjmp，longjmp函数来提供。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;setjmp.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="built_in">set</span> <span class="title function_">jmp</span><span class="params">(jmp_buf, env)</span>;</span><br><span class="line"><span class="type">int</span> <span class="title function_">sigsetjmp</span><span class="params">(sigjmp_buf env, <span class="type">int</span> savesigs)</span></span><br></pre></td></tr></table></figure>

<p>env保持调用环境，这个函数返回值为0，但不能赋值给变量</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;setjmp.h&gt;</span></span></span><br><span class="line"><span class="type">void</span> <span class="title function_">longjmp</span><span class="params">(jmp_buf env, <span class="type">int</span> retval)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">siglongjmp</span><span class="params">(sigjmp_buf env, <span class="type">int</span> retval)</span>;</span><br></pre></td></tr></table></figure>

<h2 id="8-6、操作进程的工具"><a href="#8-6、操作进程的工具" class="headerlink" title="8.6、操作进程的工具"></a>8.6、操作进程的工具</h2>
    </div>

    
    
    

      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2021/12/30/RSA-BASE64-AES/" rel="prev" title="RSA-BASE64-AES">
      <i class="fa fa-chevron-left"></i> RSA-BASE64-AES
    </a></div>
      <div class="post-nav-item">
    <a href="/2022/01/28/hgame2022/" rel="next" title="hgame2022">
      hgame2022 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#CSAPP-1-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E6%BC%AB%E6%B8%B8"><span class="nav-text">CSAPP-1:计算机系统漫游</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-1%E4%BD%8D%E4%B8%8E%E4%B8%8A%E4%B8%8B%E6%96%87"><span class="nav-text">1.1位与上下文</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-2%E9%AB%98%E7%BA%A7%E5%88%B0%E4%BD%8E%E7%BA%A7"><span class="nav-text">1.2高级到低级</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-3%E5%A4%84%E7%90%86%E5%99%A8%E8%AF%BB%E5%86%99%E5%B9%B6%E8%A7%A3%E9%87%8A%E5%82%A8%E5%AD%98%E5%9C%A8%E5%86%85%E5%AD%98%E4%B8%AD%E7%9A%84%E6%8C%87%E4%BB%A4"><span class="nav-text">1.3处理器读写并解释储存在内存中的指令</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-3-1%E7%B3%BB%E7%BB%9F%E7%9A%84%E7%A1%AC%E4%BB%B6"><span class="nav-text">1.3.1系统的硬件</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-%E6%80%BB%E7%BA%BF"><span class="nav-text">1.总线</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2%E3%80%81I-x2F-O%E8%AE%BE%E5%A4%87"><span class="nav-text">2、I&#x2F;O设备</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3%E3%80%81%E4%B8%BB%E5%AD%98"><span class="nav-text">3、主存</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4%E3%80%81%E5%A4%84%E7%90%86%E5%99%A8"><span class="nav-text">4、处理器</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-3-2%E8%BF%90%E8%A1%8C%E7%A8%8B%E5%BA%8F"><span class="nav-text">1.3.2运行程序</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-4%E9%AB%98%E9%80%9F%E7%BC%93%E5%AD%98"><span class="nav-text">1.4高速缓存</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-5%E5%AD%98%E5%82%A8%E8%AE%BE%E5%A4%87%E5%BD%A2%E6%88%90%E5%B1%82%E6%AC%A1%E7%BB%93%E6%9E%84"><span class="nav-text">1.5存储设备形成层次结构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-6%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%8A%9F%E8%83%BD"><span class="nav-text">1.6操作系统功能</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-6-1%E8%BF%9B%E7%A8%8B"><span class="nav-text">1.6.1进程</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-6-2%E7%BA%BF%E7%A8%8B"><span class="nav-text">1.6.2线程</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-6-3%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98"><span class="nav-text">1.6.3虚拟内存</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-6-4%E6%96%87%E4%BB%B6"><span class="nav-text">1.6.4文件</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-7%E7%B3%BB%E7%BB%9F%E4%B9%8B%E9%97%B4%E5%88%A9%E7%94%A8%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1"><span class="nav-text">1.7系统之间利用网络通信</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-8-1Amdahl%E5%AE%9A%E5%BE%8B"><span class="nav-text">1.8.1Amdahl定律</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-8-2%E5%B9%B6%E5%8F%91%E5%92%8C%E5%B9%B6%E8%A1%8C"><span class="nav-text">1.8.2并发和并行</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-%E7%BA%BF%E7%A8%8B%E7%BA%A7%E5%B9%B6%E5%8F%91"><span class="nav-text">1.线程级并发</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-8-3%E6%8C%87%E4%BB%A4%E7%BA%A7%E5%B9%B6%E8%A1%8C"><span class="nav-text">1.8.3指令级并行</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#1-8-4%E5%8D%95%E6%8C%87%E4%BB%A4%E3%80%81%E5%A4%9A%E6%95%B0%E6%8D%AE%E5%B9%B6%E8%A1%8C"><span class="nav-text">1.8.4单指令、多数据并行</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#csapp-2%EF%BC%9A%E4%BF%A1%E6%81%AF%E7%9A%84%E8%A1%A8%E7%A4%BA%E5%92%8C%E5%A4%84%E7%90%86"><span class="nav-text">csapp-2：信息的表示和处理</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#2-1%E3%80%81%E4%BF%A1%E6%81%AF%E5%AD%98%E5%82%A8"><span class="nav-text">2.1、信息存储</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-1%E3%80%8116%E8%BF%9B%E5%88%B6%E8%A1%A8%E7%A4%BA%E6%B3%95"><span class="nav-text">2.1.1、16进制表示法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-1-2%E3%80%81%E5%AD%97%E6%95%B0%E6%8D%AE%E5%A4%A7%E5%B0%8F"><span class="nav-text">2.1.2、字数据大小</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-3%E3%80%81%E5%AF%BB%E5%9D%80%E5%92%8C%E5%AD%97%E8%8A%82%E9%A1%BA%E5%BA%8F"><span class="nav-text">2.1.3、寻址和字节顺序</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-4%E3%80%81%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="nav-text">2.1.4、字符串</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-5%E3%80%81%E4%BB%A3%E7%A0%81"><span class="nav-text">2.1.5、代码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-6%E3%80%81%E5%B8%83%E5%B0%94%E4%BB%A3%E6%95%B0"><span class="nav-text">2.1.6、布尔代数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-7%E3%80%81c%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84%E7%A7%BB%E4%BD%8D%E8%BF%90%E7%AE%97"><span class="nav-text">2.1.7、c语言中的移位运算</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-2%E3%80%81%E6%95%B4%E6%95%B0%E8%A1%A8%E7%A4%BA"><span class="nav-text">2.2、整数表示</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-1%E3%80%81%E6%95%B4%E5%BD%A2%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="nav-text">2.2.1、整形数据类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-2%E3%80%81%E6%97%A0%E7%AC%A6%E5%8F%B7%E6%95%B0%E7%9A%84%E7%BC%96%E7%A0%81-B2U"><span class="nav-text">2.2.2、无符号数的编码(B2U)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-3%E3%80%81%E8%A1%A5%E7%A0%81%E7%BC%96%E7%A0%81%EF%BC%88B2T"><span class="nav-text">2.2.3、补码编码（B2T)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-4%E3%80%81%E6%9C%89%E7%AC%A6%E5%8F%B7%E6%95%B0%E5%92%8C%E6%97%A0%E7%AC%A6%E5%8F%B7%E6%95%B0%E8%BD%AC%E6%8D%A2"><span class="nav-text">2.2.4、有符号数和无符号数转换</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-5%E3%80%81c%E4%B8%AD%E7%9A%84%E6%9C%89%E7%AC%A6%E5%8F%B7%E5%92%8C%E6%97%A0%E7%AC%A6%E5%8F%B7%E6%95%B0"><span class="nav-text">2.2.5、c中的有符号和无符号数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-6%E3%80%81%E6%8B%93%E5%B1%95%E4%B8%80%E4%B8%AA%E6%95%B0%E5%AD%97%E7%9A%84%E4%BD%8D%E6%98%BE%E7%A4%BA"><span class="nav-text">2.2.6、拓展一个数字的位显示</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-7%E3%80%81%E6%88%AA%E6%96%AD%E6%95%B0%E5%AD%97"><span class="nav-text">2.2.7、截断数字</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-3%E6%95%B4%E6%95%B0%E8%BF%90%E7%AE%97"><span class="nav-text">2.3整数运算</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#CSAPP-3"><span class="nav-text">CSAPP-3</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#3-1%E3%80%81%E7%A8%8B%E5%BA%8F%E7%BC%96%E7%A0%81"><span class="nav-text">3.1、程序编码</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-1%E3%80%81%E6%9C%BA%E5%99%A8%E4%BB%A3%E7%A0%81"><span class="nav-text">3.1.1、机器代码</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-2%E6%95%B0%E6%8D%AE%E6%A0%BC%E5%BC%8F"><span class="nav-text">3.2数据格式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-3%E3%80%81%E6%93%8D%E4%BD%9C%E6%95%B0"><span class="nav-text">3.3、操作数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-3-1%E3%80%81%E6%95%B0%E6%8D%AE%E4%BC%A0%E9%80%81%E6%8C%87%E4%BB%A4"><span class="nav-text">3.3.1、数据传送指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-3-2%E3%80%81%E5%8E%8B%E5%85%A5%E5%92%8C%E5%BC%B9%E5%87%BA%E6%A0%88%E6%95%B0%E6%8D%AE"><span class="nav-text">3.3.2、压入和弹出栈数据</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-4%E3%80%81%E7%AE%97%E6%95%B0%E5%92%8C%E9%80%BB%E8%BE%91%E6%93%8D%E4%BD%9C"><span class="nav-text">3.4、算数和逻辑操作</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-4-1%E3%80%81%E5%8A%A0%E8%BD%BD%E6%9C%89%E6%95%88%E5%9C%B0%E5%9D%80"><span class="nav-text">3.4.1、加载有效地址</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-4-2%E3%80%81%E4%B8%80%E5%85%83%E5%92%8C%E4%BA%8C%E5%85%83%E6%93%8D%E4%BD%9C%E6%95%B0"><span class="nav-text">3.4.2、一元和二元操作数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-4-3%E3%80%81%E7%A7%BB%E4%BD%8D%E6%93%8D%E4%BD%9C"><span class="nav-text">3.4.3、移位操作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-4-4%E3%80%81%E7%89%B9%E6%AE%8A%E7%AE%97%E6%95%B0%E6%93%8D%E4%BD%9C"><span class="nav-text">3.4.4、特殊算数操作</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-5%E3%80%81%E6%8E%A7%E5%88%B6"><span class="nav-text">3.5、控制</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-5-1%E3%80%81%E6%9D%A1%E4%BB%B6%E7%A0%81"><span class="nav-text">3.5.1、条件码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-5-2%E3%80%81%E8%AE%BF%E9%97%AE%E6%9D%A1%E4%BB%B6%E7%A0%81"><span class="nav-text">3.5.2、访问条件码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-5-3%E3%80%81%E8%B7%B3%E8%BD%AC%E6%8C%87%E4%BB%A4"><span class="nav-text">3.5.3、跳转指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-5-4%E3%80%81%E8%B7%B3%E8%BD%AC%E7%BC%96%E7%A0%81"><span class="nav-text">3.5.4、跳转编码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-5-5%E3%80%81%E7%94%A8%E6%9D%A1%E4%BB%B6%E6%8E%A7%E5%88%B6%E6%9D%A5%E5%AE%9E%E7%8E%B0%E6%9D%A1%E4%BB%B6%E5%88%86%E6%94%AF"><span class="nav-text">3.5.5、用条件控制来实现条件分支</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-5-6%E3%80%81%E7%94%A8%E6%9D%A1%E4%BB%B6%E4%BC%A0%E9%80%81%E6%9D%A5%E5%AE%9E%E7%8E%B0%E6%9D%A1%E4%BB%B6%E5%88%86%E6%94%AF"><span class="nav-text">3.5.6、用条件传送来实现条件分支</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-5-7%E3%80%81%E5%BE%AA%E7%8E%AF"><span class="nav-text">3.5.7、循环</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-6%E3%80%81%E8%BF%87%E7%A8%8B"><span class="nav-text">3.6、过程</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-6-1%E3%80%81%E8%BF%90%E8%A1%8C%E6%97%B6%E6%A0%88"><span class="nav-text">3.6.1、运行时栈</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-6-2%E3%80%81%E8%BD%AC%E7%A7%BB%E6%8E%A7%E5%88%B6"><span class="nav-text">3.6.2、转移控制</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-6-3%E3%80%81%E6%95%B0%E6%8D%AE%E4%BC%A0%E9%80%81"><span class="nav-text">3.6.3、数据传送</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-6-4%E3%80%81%E6%A0%88%E4%B8%8A%E7%9A%84%E5%B1%80%E9%83%A8%E5%AD%98%E5%82%A8"><span class="nav-text">3.6.4、栈上的局部存储</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-6-5%E3%80%81%E5%AF%84%E5%AD%98%E5%99%A8%E4%B8%AD%E7%9A%84%E5%B1%80%E9%83%A8%E5%AD%98%E5%82%A8%E7%A9%BA%E9%97%B4"><span class="nav-text">3.6.5、寄存器中的局部存储空间</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-7%E3%80%81%E6%95%B0%E7%BB%84%E5%88%86%E9%85%8D%E5%92%8C%E8%AE%BF%E9%97%AE"><span class="nav-text">3.7、数组分配和访问</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-7-1%E3%80%81%E5%9F%BA%E6%9C%AC%E5%8E%9F%E5%88%99"><span class="nav-text">3.7.1、基本原则</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-7-2%E3%80%81%E6%8C%87%E9%92%88%E8%BF%90%E7%AE%97"><span class="nav-text">3.7.2、指针运算</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-7-3%E3%80%81%E5%B5%8C%E5%A5%97%E7%9A%84%E6%95%B0%E7%BB%84"><span class="nav-text">3.7.3、嵌套的数组</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-7-4%E3%80%81%E5%AE%9A%E9%95%BF%E6%95%B0%E7%BB%84"><span class="nav-text">3.7.4、定长数组</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-7-5%E3%80%81%E5%8F%98%E9%95%BF%E6%95%B0%E7%BB%84"><span class="nav-text">3.7.5、变长数组</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-8%E3%80%81%E5%BC%82%E8%B4%A8%E7%9A%84%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="nav-text">3.8、异质的数据结构</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-8-1%E3%80%81%E7%BB%93%E6%9E%84"><span class="nav-text">3.8.1、结构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-8-2%E3%80%81%E8%81%94%E5%90%88"><span class="nav-text">3.8.2、联合</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-8-3%E3%80%81%E6%95%B0%E6%8D%AE%E5%AF%B9%E9%BD%90"><span class="nav-text">3.8.3、数据对齐</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-9%E3%80%81%E5%AE%89%E5%85%A8%E6%BC%8F%E6%B4%9E"><span class="nav-text">3.9、安全漏洞</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-9-1%E3%80%81gdb%E6%93%8D%E4%BD%9C"><span class="nav-text">3.9.1、gdb操作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-9-2%E3%80%81%E5%86%85%E5%AD%98%E8%B6%8A%E7%95%8C%E5%92%8C%E7%BC%93%E5%86%B2%E5%8C%BA%E6%BA%A2%E5%87%BA"><span class="nav-text">3.9.2、内存越界和缓冲区溢出</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-9-3%E3%80%81%E5%AF%B9%E6%8A%97%E7%BC%93%E5%86%B2%E5%8C%BA%E6%BA%A2%E5%87%BA"><span class="nav-text">3.9.3、对抗缓冲区溢出</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1%E3%80%81%E6%A0%88%E9%9A%8F%E6%9C%BA%E5%8C%96%E4%B9%9F%E5%8F%ABALSR"><span class="nav-text">1、栈随机化也叫ALSR</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2%E3%80%81%E6%A0%88%E7%A0%B4%E5%9D%8F%E6%A3%80%E6%B5%8B%E4%B9%9F%E5%8F%ABcanary"><span class="nav-text">2、栈破坏检测也叫canary</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3%E3%80%81%E9%99%90%E5%88%B6%E5%8F%AF%E6%89%A7%E8%A1%8C%E4%BB%A3%E7%A0%81%E5%8C%BA%E5%9F%9FNX"><span class="nav-text">3、限制可执行代码区域NX</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-9-4%E3%80%81%E6%94%AF%E6%8C%81%E5%8F%98%E9%95%BF%E6%A0%88%E5%B8%A7"><span class="nav-text">3.9.4、支持变长栈帧</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-10%E3%80%81%E6%B5%AE%E7%82%B9%E4%BB%A3%E7%A0%81"><span class="nav-text">3.10、浮点代码</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-10-1%E3%80%81%E6%B5%AE%E7%82%B9%E4%BC%A0%E9%80%81%E5%92%8C%E8%BD%AC%E6%8D%A2%E6%93%8D%E4%BD%9C"><span class="nav-text">3.10.1、浮点传送和转换操作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-10-2%E3%80%81%E8%BF%87%E7%A8%8B%E4%B8%AD%E7%9A%84%E6%B5%AE%E7%82%B9%E4%BB%A3%E7%A0%81"><span class="nav-text">3.10.2、过程中的浮点代码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-10-3%E3%80%81%E6%B5%AE%E7%82%B9%E6%95%B0%E8%BF%90%E7%AE%97%E6%93%8D%E4%BD%9C"><span class="nav-text">3.10.3、浮点数运算操作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-10-4%E3%80%81%E5%AE%9A%E4%B9%89%E5%92%8C%E4%BD%BF%E7%94%A8%E6%B5%AE%E7%82%B9%E6%95%B0"><span class="nav-text">3.10.4、定义和使用浮点数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-10-5%E3%80%81%E5%9C%A8%E6%B5%AE%E7%82%B9%E4%BB%A3%E7%A0%81%E4%B8%AD%E4%BD%BF%E7%94%A8%E4%BD%8D%E7%BA%A7%E6%93%8D%E4%BD%9C"><span class="nav-text">3.10.5、在浮点代码中使用位级操作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-10-6%E3%80%81%E6%B5%AE%E7%82%B9%E6%AF%94%E8%BE%83%E6%93%8D%E4%BD%9C"><span class="nav-text">3.10.6、浮点比较操作</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#CSAPP-LAB"><span class="nav-text">CSAPP-LAB</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#DataLab"><span class="nav-text">DataLab</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Bomb-Lab"><span class="nav-text">Bomb Lab</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#CSAPP-7-END"><span class="nav-text">CSAPP-7-END</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%93%BE%E6%8E%A5"><span class="nav-text">链接</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#7-1%E3%80%81%E7%BC%96%E8%AF%91%E5%99%A8%E9%A9%B1%E5%8A%A8%E7%A8%8B%E5%BA%8F"><span class="nav-text">7.1、编译器驱动程序</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-2%E3%80%81%E9%9D%99%E6%80%81%E9%93%BE%E6%8E%A5"><span class="nav-text">7.2、静态链接</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-3%E3%80%81%E7%9B%AE%E6%A0%87%E6%96%87%E4%BB%B6"><span class="nav-text">7.3、目标文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-4%E3%80%81%E5%8F%AF%E9%87%8D%E5%AE%9A%E4%BD%8D%E7%9B%AE%E6%A0%87%E6%96%87%E4%BB%B6"><span class="nav-text">7.4、可重定位目标文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-5%E3%80%81%E7%AC%A6%E5%8F%B7%E5%92%8C%E7%AC%A6%E5%8F%B7%E8%A1%A8"><span class="nav-text">7.5、符号和符号表</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-6%E3%80%81%E7%AC%A6%E5%8F%B7%E8%A7%A3%E6%9E%90"><span class="nav-text">7.6、符号解析</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#7-6-1%E3%80%81%E9%93%BE%E6%8E%A5%E5%99%A8%E5%A6%82%E4%BD%95%E8%A7%A3%E6%9E%90%E5%A4%9A%E9%87%8D%E5%AE%9A%E4%B9%89%E7%9A%84%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F"><span class="nav-text">7.6.1、链接器如何解析多重定义的全局变量</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-6-2%E3%80%81%E4%B8%8E%E9%9D%99%E6%80%81%E5%BA%93%E9%93%BE%E6%8E%A5"><span class="nav-text">7.6.2、与静态库链接</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-6-3%E3%80%81%E9%93%BE%E6%8E%A5%E5%99%A8%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8%E9%9D%99%E6%80%81%E5%BA%93%E6%9D%A5%E8%A7%A3%E6%9E%90%E5%BC%95%E7%94%A8"><span class="nav-text">7.6.3、链接器如何使用静态库来解析引用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-7%E3%80%81%E9%87%8D%E5%AE%9A%E4%BD%8D"><span class="nav-text">7.7、重定位</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-7-2%E3%80%81%E9%87%8D%E5%AE%9A%E4%BD%8D%E7%AC%A6%E5%8F%B7%E5%BC%95%E7%94%A8"><span class="nav-text">7.7.2、重定位符号引用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-8%E3%80%81%E5%8F%AF%E6%89%A7%E8%A1%8C%E7%9B%AE%E6%A0%87%E6%96%87%E4%BB%B6"><span class="nav-text">7.8、可执行目标文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-9%E3%80%81%E5%8A%A0%E8%BD%BD%E5%8F%AF%E6%89%A7%E8%A1%8C%E7%9B%AE%E6%A0%87%E6%96%87%E4%BB%B6"><span class="nav-text">7.9、加载可执行目标文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-10%E3%80%81%E5%8A%A8%E6%80%81%E9%93%BE%E6%8E%A5%E5%85%B1%E4%BA%AB%E5%BA%93"><span class="nav-text">7.10、动态链接共享库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-11%E3%80%81%E4%BB%8E%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E4%B8%AD%E5%8A%A0%E8%BD%BD%E5%92%8C%E9%93%BE%E6%8E%A5%E5%85%B1%E4%BA%AB%E5%BA%93"><span class="nav-text">7.11、从应用程序中加载和链接共享库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-12%E3%80%81%E4%BD%8D%E7%BD%AE%E6%97%A0%E5%85%B3%E4%BB%A3%E7%A0%81"><span class="nav-text">7.12、位置无关代码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-13%E3%80%81%E5%BA%93%E6%89%93%E6%A1%A9%E6%9C%BA%E5%88%B6"><span class="nav-text">7.13、库打桩机制</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%BC%82%E5%B8%B8%E6%8E%A7%E5%88%B6%E6%B5%81"><span class="nav-text">异常控制流</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#8-1%E3%80%81%E5%BC%82%E5%B8%B8"><span class="nav-text">8.1、异常</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#8-1-1%E3%80%81%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86"><span class="nav-text">8.1.1、异常处理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-1-2%E3%80%81%E5%BC%82%E5%B8%B8%E7%9A%84%E7%B1%BB%E5%88%AB"><span class="nav-text">8.1.2、异常的类别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-1-3%E3%80%81linux-x2F-x86-64%E7%9A%84%E5%BC%82%E5%B8%B8"><span class="nav-text">8.1.3、linux&#x2F;x86-64的异常</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-2%E3%80%81%E8%BF%9B%E7%A8%8B"><span class="nav-text">8.2、进程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-2-1%E3%80%81%E9%80%BB%E8%BE%91%E6%8E%A7%E5%88%B6%E6%B5%81"><span class="nav-text">8.2.1、逻辑控制流</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-2-2%E3%80%81%E5%B9%B6%E5%8F%91%E6%B5%81"><span class="nav-text">8.2.2、并发流</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-2-3%E3%80%81%E7%A7%81%E6%9C%89%E5%9C%B0%E5%9D%80%E7%A9%BA%E9%97%B4"><span class="nav-text">8.2.3、私有地址空间</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-2-4%E7%94%A8%E6%88%B7%E6%A8%A1%E5%BC%8F%E5%92%8C%E5%86%85%E6%A0%B8%E6%A8%A1%E5%BC%8F"><span class="nav-text">8.2.4用户模式和内核模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-2-5%E3%80%81%E4%B8%8A%E4%B8%8B%E6%96%87%E5%88%87%E6%8D%A2"><span class="nav-text">8.2.5、上下文切换</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-3%E3%80%81%E8%BF%9B%E7%A8%8B%E6%8E%A7%E5%88%B6"><span class="nav-text">8.3、进程控制</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#8-3-1%E3%80%81%E8%8E%B7%E5%8F%96%E8%BF%9B%E7%A8%8BID"><span class="nav-text">8.3.1、获取进程ID</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-3-2%E3%80%81%E5%88%9B%E5%BB%BA%E5%92%8C%E7%BB%88%E6%AD%A2%E8%BF%9B%E7%A8%8B"><span class="nav-text">8.3.2、创建和终止进程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-3-3%E3%80%81%E5%9B%9E%E6%94%B6%E5%AD%90%E8%BF%9B%E7%A8%8B"><span class="nav-text">8.3.3、回收子进程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-3-4%E3%80%81%E8%BF%9B%E7%A8%8B%E4%BC%91%E7%9C%A0"><span class="nav-text">8.3.4、进程休眠</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-3-5%E3%80%81%E5%8A%A0%E8%BD%BD%E5%B9%B6%E8%BF%90%E8%A1%8C%E7%A8%8B%E5%BA%8F"><span class="nav-text">8.3.5、加载并运行程序</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-4%E3%80%81%E4%BF%A1%E5%8F%B7"><span class="nav-text">8.4、信号</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#8-4-1%E3%80%81%E4%BF%A1%E5%8F%B7%E6%9C%AF%E8%AF%AD"><span class="nav-text">8.4.1、信号术语</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-4-2%E3%80%81%E5%8F%91%E9%80%81%E4%BF%A1%E5%8F%B7"><span class="nav-text">8.4.2、发送信号</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-4-3%E3%80%81%E6%8E%A5%E6%94%B6%E4%BF%A1%E5%8F%B7"><span class="nav-text">8.4.3、接收信号</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-4-4%E3%80%81%E9%98%BB%E5%A1%9E%E5%92%8C%E8%A7%A3%E9%99%A4%E9%98%BB%E5%A1%9E%E4%BF%A1%E5%8F%B7"><span class="nav-text">8.4.4、阻塞和解除阻塞信号</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-4-5%E3%80%81%E7%BC%96%E5%86%99%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86%E7%A8%8B%E5%BA%8F"><span class="nav-text">8.4.5、编写信号处理程序</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-4-6%E3%80%81%E5%90%8C%E6%AD%A5%E6%B5%81%E9%81%BF%E5%85%8D%E5%B9%B6%E5%8F%91%E9%94%99%E8%AF%AF"><span class="nav-text">8.4.6、同步流避免并发错误</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-4-7%E3%80%81%E6%98%BE%E5%BC%8F%E5%9C%B0%E7%AD%89%E5%BE%85%E4%BF%A1%E5%8F%B7"><span class="nav-text">8.4.7、显式地等待信号</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-5%E3%80%81%E9%9D%9E%E6%9C%AC%E5%9C%B0%E8%B7%B3%E8%BD%AC"><span class="nav-text">8.5、非本地跳转</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-6%E3%80%81%E6%93%8D%E4%BD%9C%E8%BF%9B%E7%A8%8B%E7%9A%84%E5%B7%A5%E5%85%B7"><span class="nav-text">8.6、操作进程的工具</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="bj777"
      src="/images/bitbug_favicon.ico">
  <p class="site-author-name" itemprop="name">bj777</p>
  <div class="site-description" itemprop="description">一位逆向菜狗</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">41</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/jonathanbest7" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;jonathanbest7" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="/506611735@qq.com" title="E-Mail → 506611735@qq.com"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.zhihu.com/people/bang-ji-1" title="知乎 → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;bang-ji-1" rel="noopener" target="_blank"><i class="fab fa-zhihu fa-fw"></i>知乎</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">bj777</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

  
		<canvas class="fireworks" style="position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;" ></canvas> 
		<script type="text/javascript" src="//cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script> 
		<script type="text/javascript" src="/js/src/fireworks.js"></script>
  
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginModelPath":"assets/","model":{"jsonPath":"/live2dw/assets/koharu.model.json"},"display":{"position":"right","width":300,"height":600},"mobile":{"show":false},"rect":"opacity:0.7","log":false,"pluginJsPath":"lib/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>
